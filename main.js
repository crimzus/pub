function sajax(){var t=sajax.arguments,e=t.length,i=e-1,n=[],o=t[i];"function"!=typeof t[i]&&(i=e,o=null);for(var s=0;s<i;s++)n.push("args[]="+encodeURIComponent("string"==typeof t[s]?t[s]:JSON.stringify(t[s])));$.ajax({url:"index.php",type:"POST",data:n.join("&"),dataType:"html",success:function(t){"function"==typeof o&&o(t,!1)}})}function validateForm(t){var e=this,i=$(e).data("name"),n=e.elements,o=1,s=null,a=1;if($(":input[required]",e).each(function(){var t=$(this);if(""==t.val().trim())return t.msg$(),a=0,!1}),a){switch(i){case"request_rent":case"request_event":s=function(){e.reset()};break;case"contact":case"request":var r=$.modalmanager$.getLastModal();r&&r.hold(),s=function(){e.reset(),update_captcha(),r&&r.hide()};break;case"subscribe":case"unsubscribe":var r=$.modalmanager$.getLastModal();r&&r.hold(),s=function(){e.reset(),r&&r.hide()};break;case"search":return n.text.value.match($(n.text).attr("pattern"))?void $.pjax.submit(t,$.pjax.container):($(n.text).msg$({pos:$(e).data("pos")||"b"}),0)}a&&(o?$(e).sf$({explode:1,complete:s}):e.submit())}}function check_captcha(t,e){var i=$.modalmanager$.getLastModal();i&&i.hold(),sajax("home","x_captcha",$(t).val(),function(n){i&&i.removeHold(),n=parseInt(n),n?(t.setCustomValidity(""),$(t).data("status",1),e()):(t.setCustomValidity("!"),$(t).closest("form").find(':button[type="submit"]').click(),update_captcha())})}function update_captcha(){$('img[data-captcha="img"]').attr("src","/captcha.php?rnd="+Math.round(Math.random()*+new Date))}function explode$(t,e,i){var n=[];if(i="undefined"==typeof i?0:i){var o=e.toString().split(t),s=o.splice(0,i-1),a=o.join(t);s.push(a),n=s}else n=e.toString().split(t);for(var r in n)n[r]=$.trim(n[r]);return n}function initShareByContext(t,e,i){var n={};["name","link","description","image"].forEach(function(e){n[e]=i[e](t)}),e.find('[data-share-btn="fb"]').on("click",function(t){t.preventDefault();var e=[];e.push("u="+encodeURIComponent(n.link)),e.push("t="+encodeURIComponent(n.description)),window.open("https://www.facebook.com/sharer.php?"+e.join("&"),"_blank","scrollbars=0,resizable=1,menubar=0,left=200,top=200,width=550,height=440,toolbar=0,status=0")}),e.find('[data-share-btn="tw"]').on("click",function(t){t.preventDefault();var e=[];e.push("url="+encodeURIComponent(n.link)),e.push("text="+encodeURIComponent(n.description)),window.open("http://twitter.com/share?"+e.join("&"),"_blank","scrollbars=0,resizable=1,menubar=0,left=200,top=200,width=550,height=440,toolbar=0,status=0")}),e.find('[data-share-btn="gp"]').on("click",function(t){t.preventDefault();var e=[];e.push("url="+encodeURIComponent(n.link)),e.push("text="+encodeURIComponent(n.description)),window.open("https://plus.google.com/share?"+e.join("&"),"_blank","scrollbars=0,resizable=1,menubar=0,left=200,top=200,width=550,height=440,toolbar=0,status=0")}),e.find('[data-share-btn="pi"]').on("click",function(t){t.preventDefault();var e=[];e.push("url="+encodeURIComponent(n.link)),e.push("media="+encodeURIComponent(n.image)),e.push("description="+encodeURIComponent(n.description)),window.open("http://pinterest.com/pin/create/link/?"+e.join("&"),"_blank","scrollbars=0,resizable=1,menubar=0,left=200,top=200,width=550,height=440,toolbar=0,status=0")}),e.find('[data-share-btn="tu"]').on("click",function(t){t.preventDefault();var e=[];e.push("url="+encodeURIComponent(n.link)),e.push("name="+encodeURIComponent(n.name)),e.push("description="+encodeURIComponent(n.description)),window.open("http://www.tumblr.com/share/link?"+e.join("&"),"_blank","scrollbars=0,resizable=1,menubar=0,left=200,top=200,width=550,height=440,toolbar=0,status=0")}),e.find('[data-share-btn="in"]').on("click",function(t){t.preventDefault();var e=[];e.push("url="+encodeURIComponent(n.link)),e.push("name="+encodeURIComponent(n.name)),e.push("summary="+encodeURIComponent(n.description)),window.open("https://www.linkedin.com/shareArticle?mini=true&"+e.join("&"),"_blank","scrollbars=0,resizable=1,menubar=0,left=200,top=200,width=550,height=440,toolbar=0,status=0")}),e.find('[data-share-btn="vk"]').on("click",function(t){t.preventDefault();var e=[];e.push("url="+encodeURIComponent(n.link)),e.push("title="+encodeURIComponent(n.name)),e.push("image="+encodeURIComponent(n.image)),e.push("noparse=false"),window.open("http://vkontakte.ru/share.php?"+e.join("&"),"_blank","scrollbars=0,resizable=1,menubar=0,left=200,top=200,width=650,height=550,toolbar=0,status=0")})}function addEvents(t,e){"undefined"==typeof listeners[t]&&(listeners[t]=[]),listeners[t].push(e)}function removeEvents(t){listeners[t]=[]}function dispatchEvents(t){"undefined"!=typeof listeners[t]&&listeners[t].forEach(function(t){t()})}function initDynamicPageContent(t){$("[data-dynamic-page-content]").dynamicPageContent($.extend({bottomHeightRatio:.5,isScroll:!1},t))}function loadMap(t,e){"undefined"==typeof cacheMap[t]?sajax("mall_map","getFloorMap",t,function(i){cacheMap[t]=i,e(i)}):e(cacheMap[t])}function loadFloorMap(t){var e="[data-floor-map]";Dafi.View.MapPreloader.appendTo(e),loadMap(t,function(t){$(e).html(t),Dafi.View.Map.init(),dispatchEvents("loadFloorMap")})}function loadTradingObject(t,e){"undefined"==typeof shopsData[t].content?sajax("mall_trading_object","getObject",t,function(i){shopsData[t].content=i,e(i)}):e(shopsData[t].content)}function setActiveMapObjectsForTrading(t){var e=getMapObjectsIdByTrading(t);addEvents("loadFloorMap",function(){var t,i=$("[data-floor-map]"),n=i.find("[data-trading-object]");n.removeAttr("class").each(function(){(t=Dafi.View.Map.getID(this))&&$.inArray(t,e)!==-1&&$(this).attr("class","active").attr("fill",Dafi.View.Map.options.defaultColor)})})}function getMapObjectsIdByTrading(t){var e=[];return $.each(shopsData,function(i,n){n.id_trading_object===t&&e.push(parseInt(i))}),e}if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var o=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(o,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),o=i.data("bs.alert");o||i.data("bs.alert",o=new n(this)),"string"==typeof e&&o[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var o=t(this),s=o.attr("data-target");s||(s=o.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var a=t(s);e&&e.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var o=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=o,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.button"),s="object"==typeof e&&e;o||n.data("bs.button",o=new i(this,s)),"toggle"==e?o.toggle():e&&o.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.5",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,o=n.is("input")?"val":"html",s=n.data();e+="Text",null==s.resetText&&n.data("resetText",n[o]()),setTimeout(t.proxy(function(){n[o](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.carousel"),s=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;o||n.data("bs.carousel",o=new i(this,s)),"number"==typeof e?o.to(e):a?o[a]():s.interval&&o.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var o="prev"==t?-1:1,s=(i+o)%this.$items.length;return this.$items.eq(s)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,n){var o=this.$element.find(".item.active"),s=n||this.getItemForDirection(e,o),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var d=s[0],h=t.Event("slide.bs.carousel",{relatedTarget:d,direction:r});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=t(this.$indicators.children()[this.getItemIndex(s)]);c&&c.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:d,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,o.addClass(r),s.addClass(r),o.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),o.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(o.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(p)),a&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var o=function(i){var n,o=t(this),s=t(o.attr("data-target")||(n=o.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=t.extend({},s.data(),o.data()),r=o.attr("data-slide-to");r&&(a.interval=!1),e.call(s,a),r&&s.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),o=i.data("bs.collapse"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!o&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),o||i.data("bs.collapse",o=new n(this,s)),"string"==typeof e&&o[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.5",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(e=o.data("bs.collapse"),e&&e.transitioning))){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(i.call(o,"hide"),e||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[a](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(o,this)).emulateTransitionEnd(n.TRANSITION_DURATION):o.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var o=t(n);this.addAriaAndCollapsedClass(e(o),o)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var o=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=o,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var o=t(this);o.attr("data-target")||n.preventDefault();var s=e(o),a=s.data("bs.collapse"),r=a?"toggle":o.data();i.call(s,r)})}(jQuery),+function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function i(i){i&&3===i.which||(t(o).remove(),t(s).each(function(){var n=t(this),o=e(n),s={relatedTarget:this};o.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(o[0],i.target)||(o.trigger(i=t.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),o.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new a(this)),"string"==typeof e&&n[e].call(i)})}var o=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.5",a.prototype.toggle=function(n){var o=t(this);if(!o.is(".disabled, :disabled")){var s=e(o),a=s.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var r={relatedTarget:this};if(s.trigger(n=t.Event("show.bs.dropdown",r)),n.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",r))}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=t(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var o=e(n),a=o.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&o.find(s).trigger("focus"),n.trigger("click");var r=" li:not(.disabled):visible a",l=o.find(".dropdown-menu"+r);if(l.length){var d=l.index(i.target);38==i.which&&d>0&&d--,40==i.which&&d<l.length-1&&d++,~d||(d=0),l.eq(d).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var o=t(this),s=o.data("bs.modal"),a=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e);s||o.data("bs.modal",s=new i(this,a)),"string"==typeof e?s[e](n):a.show&&s.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.5",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,o=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),o&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});o?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&o;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),o=n.attr("href"),s=t(n.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(o)&&o},s.data(),n.data());n.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(s,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tooltip"),s="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||n.data("bs.tooltip",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),s=o.length;s--;){var a=o[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue())return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var o=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(r);d&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),c=s[0].offsetWidth,p=s[0].offsetHeight;if(d){var u=r,f=this.getPosition(this.$viewport);r="bottom"==r&&h.bottom+p>f.bottom?"top":"top"==r&&h.top-p<f.top?"bottom":"right"==r&&h.right+c>f.width?"left":"left"==r&&h.left-c<f.left?"right":r,s.removeClass(u).addClass(r)}var m=this.getCalculatedOffset(r,h,c,p);this.applyPlacement(m,r);var g=function(){var t=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==t&&o.leave(o)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",g).emulateTransitionEnd(i.TRANSITION_DURATION):g()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),o=n[0].offsetWidth,s=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=s&&(e.top=e.top+s-d);var h=this.getViewportAdjustedDelta(i,e,l,d);h.left?e.left+=h.left:e.top+=h.top;var c=/top|bottom/.test(i),p=c?2*h.left-o+l:2*h.top-s+d,u=c?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(p,n[0][u],c)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=o.hoverState&&s.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),e&&e()}var o=this,s=t(this.$tip),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,o=i.getBoundingClientRect();null==o.width&&(o=t.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var s=n?{top:0,left:0}:e.offset(),a={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()
},r=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},o,a,r,s)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var o={top:0,left:0};if(!this.$viewport)return o;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+n;r<a.top?o.top=a.top-r:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var d=e.left-s,h=e.left+s+i;d<a.left?o.left=a.left-d:h>a.right&&(o.left=a.left+a.width-h)}return o},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.popover"),s="object"==typeof e&&e;!o&&/destroy|hide/.test(e)||(o||n.data("bs.popover",o=new i(this,s)),"string"==typeof e&&o[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.5",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),o=n.data("bs.scrollspy"),s="object"==typeof i&&i;o||n.data("bs.scrollspy",o=new e(this,s)),"string"==typeof i&&o[i]()})}e.VERSION="3.3.5",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),o=e.data("target")||e.attr("href"),s=/^#./.test(o)&&t(o);return s&&s.length&&s.is(":visible")&&[[s[i]().top+n,o]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),o=this.offsets,s=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return a!=(t=s[s.length-1])&&this.activate(t);if(a&&e<o[0])return this.activeTarget=null,this.clear();for(t=o.length;t--;)a!=s[t]&&e>=o[t]&&(void 0===o[t+1]||e<o[t+1])&&this.activate(s[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.tab");o||n.data("bs.tab",o=new i(this)),"string"==typeof e&&o[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.5",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var o=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(n);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},i.prototype.activate=function(e,n,o){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var a=n.find("> .active"),r=o&&t.support.transition&&(a.length&&a.hasClass("fade")||!!n.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),a.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var o=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),o=n.data("bs.affix"),s="object"==typeof e&&e;o||n.data("bs.affix",o=new i(this,s)),"string"==typeof e&&o[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.5",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var o=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return o<i&&"top";if("bottom"==this.affixed)return null!=i?!(o+this.unpin<=s.top)&&"bottom":!(o+a<=t-n)&&"bottom";var r=null==this.affixed,l=r?o:s.top,d=r?a:e;return null!=i&&o<=i?"top":null!=n&&l+d>=t-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,o=n.top,s=n.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof n&&(s=o=n),"function"==typeof o&&(o=n.top(this.$element)),"function"==typeof s&&(s=n.bottom(this.$element));var r=this.getState(a,e,o,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),d=t.Event(l+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery),function(t){"use strict";function e(e){var i=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return t.each(i,function(){e=e.replace(this.re,this.ch)}),e}function i(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i="(?:"+Object.keys(e).join("|")+")",n=new RegExp(i),o=new RegExp(i,"g"),s=null==t?"":""+t;return n.test(s)?s.replace(o,function(t){return e[t]}):s}function n(e,i){var n=arguments,s=e,a=i;[].shift.apply(n);var r,l=this.each(function(){var e=t(this);if(e.is("select")){var i=e.data("selectpicker"),l="object"==typeof s&&s;if(i){if(l)for(var d in l)l.hasOwnProperty(d)&&(i.options[d]=l[d])}else{var h=t.extend({},o.DEFAULTS,t.fn.selectpicker.defaults||{},e.data(),l);h.template=t.extend({},o.DEFAULTS.template,t.fn.selectpicker.defaults?t.fn.selectpicker.defaults.template:{},e.data().template,l.template),e.data("selectpicker",i=new o(this,h,a))}"string"==typeof s&&(r=i[s]instanceof Function?i[s].apply(i,n):i.options[s])}});return"undefined"!=typeof r?r:l}String.prototype.includes||!function(){var t={}.toString,e=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(n){}return i}(),i="".indexOf,n=function(e){if(null==this)throw new TypeError;var n=String(this);if(e&&"[object RegExp]"==t.call(e))throw new TypeError;var o=n.length,s=String(e),a=s.length,r=arguments.length>1?arguments[1]:void 0,l=r?Number(r):0;l!=l&&(l=0);var d=Math.min(Math.max(l,0),o);return!(a+d>o)&&i.call(n,s,l)!=-1};e?e(String.prototype,"includes",{value:n,configurable:!0,writable:!0}):String.prototype.includes=n}(),String.prototype.startsWith||!function(){var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(n){}return i}(),e={}.toString,i=function(t){if(null==this)throw new TypeError;var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw new TypeError;var n=i.length,o=String(t),s=o.length,a=arguments.length>1?arguments[1]:void 0,r=a?Number(a):0;r!=r&&(r=0);var l=Math.min(Math.max(r,0),n);if(s+l>n)return!1;for(var d=-1;++d<s;)if(i.charCodeAt(l+d)!=o.charCodeAt(d))return!1;return!0};t?t(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),Object.keys||(Object.keys=function(t,e,i){i=[];for(e in t)i.hasOwnProperty.call(t,e)&&i.push(e);return i}),t.fn.triggerNative=function(t){var e,i=this[0];i.dispatchEvent?("function"==typeof Event?e=new Event(t,{bubbles:!0}):(e=document.createEvent("Event"),e.initEvent(t,!0,!1)),i.dispatchEvent(e)):(i.fireEvent&&(e=document.createEventObject(),e.eventType=t,i.fireEvent("on"+t,e)),this.trigger(t))},t.expr[":"].icontains=function(e,i,n){var o=t(e),s=(o.data("tokens")||o.text()).toUpperCase();return s.includes(n[3].toUpperCase())},t.expr[":"].ibegins=function(e,i,n){var o=t(e),s=(o.data("tokens")||o.text()).toUpperCase();return s.startsWith(n[3].toUpperCase())},t.expr[":"].aicontains=function(e,i,n){var o=t(e),s=(o.data("tokens")||o.data("normalizedText")||o.text()).toUpperCase();return s.includes(n[3].toUpperCase())},t.expr[":"].aibegins=function(e,i,n){var o=t(e),s=(o.data("tokens")||o.data("normalizedText")||o.text()).toUpperCase();return s.startsWith(n[3].toUpperCase())};var o=function(e,i,n){n&&(n.stopPropagation(),n.preventDefault()),this.$element=t(e),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=i,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=o.prototype.val,this.render=o.prototype.render,this.refresh=o.prototype.refresh,this.setStyle=o.prototype.setStyle,this.selectAll=o.prototype.selectAll,this.deselectAll=o.prototype.deselectAll,this.destroy=o.prototype.destroy,this.remove=o.prototype.remove,this.show=o.prototype.show,this.hide=o.prototype.hide,this.init()};o.VERSION="1.7.6",o.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(t,e){return 1==t?"{0} item selected":"{0} items selected"},maxOptionsText:function(t,e){return[1==t?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==e?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1},o.prototype={constructor:o,init:function(){var e=this,i=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.liObj={},this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(".dropdown-menu"),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof i&&(this.$button.attr("data-id",i),t('label[for="'+i+'"]').click(function(t){t.preventDefault(),e.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(t){e.$element.trigger("hide.bs.select",t)},"hidden.bs.dropdown":function(t){e.$element.trigger("hidden.bs.select",t)},"show.bs.dropdown":function(t){e.$element.trigger("show.bs.select",t)},"shown.bs.dropdown":function(t){e.$element.trigger("shown.bs.select",t)}}),setTimeout(function(){e.$element.trigger("loaded.bs.select")})},createDropdown:function(){var e=this.multiple?" show-tick":"",n=this.$element.parent().hasClass("input-group")?" input-group-btn":"",o=this.autofocus?" autofocus":"",s=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",a=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+i(this.options.liveSearchPlaceholder)+'"')+"></div>":"",r=this.multiple&&this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn btn-default">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn btn-default">'+this.options.deselectAllText+"</button></div></div>":"",l=this.multiple&&this.options.doneButton?'<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm btn-default">'+this.options.doneButtonText+"</button></div></div>":"",d='<div class="btn-group bootstrap-select'+e+n+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" data-toggle="dropdown"'+o+'><span class="filter-option pull-left"></span>&nbsp;<span class="bs-caret">'+this.options.template.caret+'</span></button><div class="dropdown-menu open">'+s+a+r+'<ul class="dropdown-menu inner" role="menu"></ul>'+l+"</div></div>";return t(d)},createView:function(){var t=this.createDropdown(),e=this.createLi();return t.find("ul")[0].innerHTML=e,t},reloadLi:function(){this.destroyLi();var t=this.createLi();this.$menuInner[0].innerHTML=t},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var n=this,o=[],s=0,a=document.createElement("option"),r=-1,l=function(t,e,i,n){return"<li"+("undefined"!=typeof i&""!==i?' class="'+i+'"':"")+("undefined"!=typeof e&null!==e?' data-original-index="'+e+'"':"")+("undefined"!=typeof n&null!==n?'data-optgroup="'+n+'"':"")+">"+t+"</li>"},d=function(t,o,s,a){return'<a tabindex="0"'+("undefined"!=typeof o?' class="'+o+'"':"")+("undefined"!=typeof s?' style="'+s+'"':"")+(n.options.liveSearchNormalize?' data-normalized-text="'+e(i(t))+'"':"")+("undefined"!=typeof a||null!==a?' data-tokens="'+a+'"':"")+">"+t+'<span class="'+n.options.iconBase+" "+n.options.tickIcon+' check-mark"></span></a>'};if(this.options.title&&!this.multiple&&(r--,!this.$element.find(".bs-title-option").length)){var h=this.$element[0];a.className="bs-title-option",a.appendChild(document.createTextNode(this.options.title)),a.value="",h.insertBefore(a,h.firstChild),void 0===t(h.options[h.selectedIndex]).attr("selected")&&(a.selected=!0)}return this.$element.find("option").each(function(e){var i=t(this);if(r++,!i.hasClass("bs-title-option")){var a=this.className||"",h=this.style.cssText,c=i.data("content")?i.data("content"):i.html(),p=i.data("tokens")?i.data("tokens"):null,u="undefined"!=typeof i.data("subtext")?'<small class="text-muted">'+i.data("subtext")+"</small>":"",f="undefined"!=typeof i.data("icon")?'<span class="'+n.options.iconBase+" "+i.data("icon")+'"></span> ':"",m=this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled;if(""!==f&&m&&(f="<span>"+f+"</span>"),n.options.hideDisabled&&m)return void r--;if(i.data("content")||(c=f+'<span class="text">'+c+u+"</span>"),"OPTGROUP"===this.parentNode.tagName&&i.data("divider")!==!0){var g=" "+this.parentNode.className||"";if(0===i.index()){s+=1;var v=this.parentNode.label,y="undefined"!=typeof i.parent().data("subtext")?'<small class="text-muted">'+i.parent().data("subtext")+"</small>":"",b=i.parent().data("icon")?'<span class="'+n.options.iconBase+" "+i.parent().data("icon")+'"></span> ':"";v=b+'<span class="text">'+v+y+"</span>",0!==e&&o.length>0&&(r++,o.push(l("",null,"divider",s+"div"))),r++,o.push(l(v,null,"dropdown-header"+g,s))}o.push(l(d(c,"opt "+a+g,h,p),e,"",s))}else i.data("divider")===!0?o.push(l("",e,"divider")):i.data("hidden")===!0?o.push(l(d(c,a,h,p),e,"hidden is-hidden")):(this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName&&(r++,o.push(l("",null,"divider",s+"div"))),o.push(l(d(c,a,h,p),e)));n.liObj[e]=r}}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),o.join("")},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(e){var i,n=this;e!==!1&&this.$element.find("option").each(function(t){var e=n.findLis().eq(n.liObj[t]);n.setDisabled(t,this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled,e),n.setSelected(t,this.selected,e)}),this.tabIndex();var o=this.$element.find("option").map(function(){if(this.selected){if(n.options.hideDisabled&&(this.disabled||"OPTGROUP"===this.parentNode.tagName&&this.parentNode.disabled))return;var e,i=t(this),o=i.data("icon")&&n.options.showIcon?'<i class="'+n.options.iconBase+" "+i.data("icon")+'"></i> ':"";return e=n.options.showSubtext&&i.data("subtext")&&!n.multiple?' <small class="text-muted">'+i.data("subtext")+"</small>":"","undefined"!=typeof i.attr("title")?i.attr("title"):i.data("content")&&n.options.showContent?i.data("content"):o+i.html()+e}}).toArray(),s=this.multiple?o.join(this.options.multipleSeparator):o[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var a=this.options.selectedTextFormat.split(">");if(a.length>1&&o.length>a[1]||1==a.length&&o.length>=2){i=this.options.hideDisabled?", [disabled]":"";var r=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+i).length,l="function"==typeof this.options.countSelectedText?this.options.countSelectedText(o.length,r):this.options.countSelectedText;s=l.replace("{0}",o.length.toString()).replace("{1}",r.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(s=this.options.title),s||(s="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",t.trim(s.replace(/<[^>]*>?/g,""))),this.$button.children(".filter-option").html(s),this.$element.trigger("rendered.bs.select")},setStyle:function(t,e){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=t?t:this.options.style;"add"==e?this.$button.addClass(i):"remove"==e?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(e){if(e||this.options.size!==!1&&!this.sizeInfo){var i=document.createElement("div"),n=document.createElement("div"),o=document.createElement("ul"),s=document.createElement("li"),a=document.createElement("li"),r=document.createElement("a"),l=document.createElement("span"),d=this.options.header?this.$menu.find(".popover-title")[0].cloneNode(!0):null,h=this.options.liveSearch?document.createElement("div"):null,c=this.options.actionsBox&&this.multiple?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,p=this.options.doneButton&&this.multiple?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null;if(l.className="text",i.className=this.$menu[0].parentNode.className+" open",n.className="dropdown-menu open",o.className="dropdown-menu inner",s.className="divider",l.appendChild(document.createTextNode("Inner text")),r.appendChild(l),a.appendChild(r),o.appendChild(a),o.appendChild(s),d&&n.appendChild(d),h){var u=document.createElement("span");h.className="bs-searchbox",u.className="form-control",h.appendChild(u),n.appendChild(h)}c&&n.appendChild(c),n.appendChild(o),p&&n.appendChild(p),i.appendChild(n),document.body.appendChild(i);var f=r.offsetHeight,m=d?d.offsetHeight:0,g=h?h.offsetHeight:0,v=c?c.offsetHeight:0,y=p?p.offsetHeight:0,b=t(s).outerHeight(!0),w="function"==typeof getComputedStyle&&getComputedStyle(n),$=w?null:t(n),C=parseInt(w?w.paddingTop:$.css("paddingTop"))+parseInt(w?w.paddingBottom:$.css("paddingBottom"))+parseInt(w?w.borderTopWidth:$.css("borderTopWidth"))+parseInt(w?w.borderBottomWidth:$.css("borderBottomWidth")),x=C+parseInt(w?w.marginTop:$.css("marginTop"))+parseInt(w?w.marginBottom:$.css("marginBottom"))+2;document.body.removeChild(i),this.sizeInfo={liHeight:f,headerHeight:m,searchHeight:g,actionsHeight:v,doneButtonHeight:y,dividerHeight:b,menuPadding:C,menuExtras:x}}},setSize:function(){if(this.findLis(),this.liHeight(),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var e,i,n,o,s=this,a=this.$menu,r=this.$menuInner,l=t(window),d=this.$newElement[0].offsetHeight,h=this.sizeInfo.liHeight,c=this.sizeInfo.headerHeight,p=this.sizeInfo.searchHeight,u=this.sizeInfo.actionsHeight,f=this.sizeInfo.doneButtonHeight,m=this.sizeInfo.dividerHeight,g=this.sizeInfo.menuPadding,v=this.sizeInfo.menuExtras,y=this.options.hideDisabled?".disabled":"",b=function(){n=s.$newElement.offset().top-l.scrollTop(),o=l.height()-n-d};if(b(),"auto"===this.options.size){var w=function(){var l,d=function(e,i){return function(n){return i?n.classList?n.classList.contains(e):t(n).hasClass(e):!(n.classList?n.classList.contains(e):t(n).hasClass(e))}},m=s.$menuInner[0].getElementsByTagName("li"),y=Array.prototype.filter?Array.prototype.filter.call(m,d("hidden",!1)):s.$lis.not(".hidden"),w=Array.prototype.filter?Array.prototype.filter.call(y,d("dropdown-header",!0)):y.filter(".dropdown-header");b(),e=o-v,s.options.container?(a.data("height")||a.data("height",a.height()),i=a.data("height")):i=a.height(),s.options.dropupAuto&&s.$newElement.toggleClass("dropup",n>o&&e-v<i),s.$newElement.hasClass("dropup")&&(e=n-v),l=y.length+w.length>3?3*h+v-2:0,a.css({"max-height":e+"px",overflow:"hidden","min-height":l+c+p+u+f+"px"}),r.css({"max-height":e-c-p-u-f-g+"px","overflow-y":"auto","min-height":Math.max(l-g,0)+"px"})};w(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",w),l.off("resize.getSize scroll.getSize").on("resize.getSize scroll.getSize",w)}else if(this.options.size&&"auto"!=this.options.size&&this.$lis.not(y).length>this.options.size){var $=this.$lis.not(".divider").not(y).children().slice(0,this.options.size).last().parent().index(),C=this.$lis.slice(0,$+1).filter(".divider").length;e=h*this.options.size+C*m+g,s.options.container?(a.data("height")||a.data("height",a.height()),i=a.data("height")):i=a.height(),s.options.dropupAuto&&this.$newElement.toggleClass("dropup",n>o&&e-v<i),a.css({"max-height":e+c+p+u+f+"px",overflow:"hidden","min-height":""}),r.css({"max-height":e-g+"px","overflow-y":"auto","min-height":""})}}},setWidth:function(){if("auto"===this.options.width){this.$menu.css("min-width","0");var t=this.$menu.parent().clone().appendTo("body"),e=this.options.container?this.$newElement.clone().appendTo("body"):t,i=t.children(".dropdown-menu").outerWidth(),n=e.css("width","auto").children("button").outerWidth();t.remove(),e.remove(),this.$newElement.css("width",Math.max(i,n)+"px")}else"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=t('<div class="bs-container" />');var e,i,n=this,o=function(t){n.$bsContainer.addClass(t.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass("dropup",t.hasClass("dropup")),e=t.offset(),i=t.hasClass("dropup")?0:t[0].offsetHeight,n.$bsContainer.css({top:e.top+i,left:e.left,width:t[0].offsetWidth})};this.$newElement.on("click",function(){var e=t(this);n.isDisabled()||(o(e),n.$bsContainer.appendTo(n.options.container).toggleClass("open",!e.hasClass("open")).append(n.$menu))}),t(window).on("resize scroll",function(){o(n.$newElement)}),this.$element.on("hide.bs.select",function(){n.$menu.data("height",n.$menu.height()),n.$bsContainer.detach()})},setSelected:function(t,e,i){i||(i=this.findLis().eq(this.liObj[t])),i.toggleClass("selected",e)},setDisabled:function(t,e,i){i||(i=this.findLis().eq(this.liObj[t])),e?i.addClass("disabled").children("a").attr("href","#").attr("tabindex",-1):i.removeClass("disabled").children("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var t=this;this.isDisabled()?(this.$newElement.addClass("disabled"),this.$button.addClass("disabled").attr("tabindex",-1)):(this.$button.hasClass("disabled")&&(this.$newElement.removeClass("disabled"),this.$button.removeClass("disabled")),this.$button.attr("tabindex")!=-1||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!t.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var e=this,i=t(document);this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(t){t.stopPropagation()}),i.data("spaceSelect",!1),this.$button.on("keyup",function(t){/(32)/.test(t.keyCode.toString(10))&&i.data("spaceSelect")&&(t.preventDefault(),i.data("spaceSelect",!1))}),this.$newElement.on("click",function(){e.setSize(),e.$element.on("shown.bs.select",function(){if(e.options.liveSearch||e.multiple){if(!e.multiple){var t=e.liObj[e.$element[0].selectedIndex];if("number"!=typeof t||e.options.size===!1)return;var i=e.$lis.eq(t)[0].offsetTop-e.$menuInner[0].offsetTop;i=i-e.$menuInner[0].offsetHeight/2+e.sizeInfo.liHeight/2,e.$menuInner[0].scrollTop=i}}else e.$menuInner.find(".selected a").focus()})}),this.$menuInner.on("click","li a",function(i){var n=t(this),o=n.parent().data("originalIndex"),s=e.$element.val(),a=e.$element.prop("selectedIndex");if(e.multiple&&i.stopPropagation(),i.preventDefault(),!e.isDisabled()&&!n.parent().hasClass("disabled")){var r=e.$element.find("option"),l=r.eq(o),d=l.prop("selected"),h=l.parent("optgroup"),c=e.options.maxOptions,p=h.data("maxOptions")||!1;if(e.multiple){if(l.prop("selected",!d),e.setSelected(o,!d),n.blur(),c!==!1||p!==!1){var u=c<r.filter(":selected").length,f=p<h.find("option:selected").length;if(c&&u||p&&f)if(c&&1==c)r.prop("selected",!1),l.prop("selected",!0),e.$menuInner.find(".selected").removeClass("selected"),e.setSelected(o,!0);else if(p&&1==p){h.find("option:selected").prop("selected",!1),l.prop("selected",!0);var m=n.parent().data("optgroup");e.$menuInner.find('[data-optgroup="'+m+'"]').removeClass("selected"),e.setSelected(o,!0)}else{var g="function"==typeof e.options.maxOptionsText?e.options.maxOptionsText(c,p):e.options.maxOptionsText,v=g[0].replace("{n}",c),y=g[1].replace("{n}",p),b=t('<div class="notify"></div>');g[2]&&(v=v.replace("{var}",g[2][c>1?0:1]),y=y.replace("{var}",g[2][p>1?0:1])),l.prop("selected",!1),e.$menu.append(b),c&&u&&(b.append(t("<div>"+v+"</div>")),e.$element.trigger("maxReached.bs.select")),
p&&f&&(b.append(t("<div>"+y+"</div>")),e.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){e.setSelected(o,!1)},10),b.delay(750).fadeOut(300,function(){t(this).remove()})}}}else r.prop("selected",!1),l.prop("selected",!0),e.$menuInner.find(".selected").removeClass("selected"),e.setSelected(o,!0);e.multiple?e.options.liveSearch&&e.$searchbox.focus():e.$button.focus(),(s!=e.$element.val()&&e.multiple||a!=e.$element.prop("selectedIndex")&&!e.multiple)&&(e.$element.triggerNative("change"),e.$element.trigger("changed.bs.select",[o,l.prop("selected"),d]))}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),e.options.liveSearch&&!t(i.target).hasClass("close")?e.$searchbox.focus():e.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(t){t.preventDefault(),t.stopPropagation(),e.options.liveSearch?e.$searchbox.focus():e.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){e.$button.click()}),this.$searchbox.on("click",function(t){t.stopPropagation()}),this.$menu.on("click",".actions-btn",function(i){e.options.liveSearch?e.$searchbox.focus():e.$button.focus(),i.preventDefault(),i.stopPropagation(),t(this).hasClass("bs-select-all")?e.selectAll():e.deselectAll(),e.$element.triggerNative("change")}),this.$element.change(function(){e.render(!1)})},liveSearchListener:function(){var n=this,o=t('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){n.$menuInner.find(".active").removeClass("active"),n.$searchbox.val()&&(n.$searchbox.val(""),n.$lis.not(".is-hidden").removeClass("hidden"),o.parent().length&&o.remove()),n.multiple||n.$menuInner.find(".selected").addClass("active"),setTimeout(function(){n.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(t){t.stopPropagation()}),this.$searchbox.on("input propertychange",function(){if(n.$searchbox.val()){var s=n.$lis.not(".is-hidden").removeClass("hidden").children("a");s=n.options.liveSearchNormalize?s.not(":a"+n._searchStyle()+'("'+e(n.$searchbox.val())+'")'):s.not(":"+n._searchStyle()+'("'+n.$searchbox.val()+'")'),s.parent().addClass("hidden"),n.$lis.filter(".dropdown-header").each(function(){var e=t(this),i=e.data("optgroup");0===n.$lis.filter("[data-optgroup="+i+"]").not(e).not(".hidden").length&&(e.addClass("hidden"),n.$lis.filter("[data-optgroup="+i+"div]").addClass("hidden"))});var a=n.$lis.not(".hidden");a.each(function(e){var i=t(this);i.hasClass("divider")&&(i.index()===a.first().index()||i.index()===a.last().index()||a.eq(e+1).hasClass("divider"))&&i.addClass("hidden")}),n.$lis.not(".hidden, .no-results").length?o.parent().length&&o.remove():(o.parent().length&&o.remove(),o.html(n.options.noneResultsText.replace("{0}",'"'+i(n.$searchbox.val())+'"')).show(),n.$menuInner.append(o))}else n.$lis.not(".is-hidden").removeClass("hidden"),o.parent().length&&o.remove();n.$lis.filter(".active").removeClass("active"),n.$searchbox.val()&&n.$lis.not(".hidden, .divider, .dropdown-header").eq(0).addClass("active").children("a").focus(),t(this).focus()})},_searchStyle:function(){var t={begins:"ibegins",startsWith:"ibegins"};return t[this.options.liveSearchStyle]||"icontains"},val:function(t){return"undefined"!=typeof t?(this.$element.val(t),this.render(),this.$element):this.$element.val()},changeAll:function(e){"undefined"==typeof e&&(e=!0),this.findLis();for(var i=this.$element.find("option"),n=this.$lis.not(".divider, .dropdown-header, .disabled, .hidden").toggleClass("selected",e),o=n.length,s=[],a=0;a<o;a++){var r=n[a].getAttribute("data-original-index");s[s.length]=i.eq(r)[0]}t(s).prop("selected",e),this.render(!1)},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},keydown:function(i){var n,o,s,a,r,l,d,h,c,p=t(this),u=p.is("input")?p.parent().parent():p.parent(),f=u.data("this"),m=":not(.disabled, .hidden, .dropdown-header, .divider)",g={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(f.options.liveSearch&&(u=p.parent().parent()),f.options.container&&(u=f.$menu),n=t("[role=menu] li",u),c=f.$menu.parent().hasClass("open"),!c&&(i.keyCode>=48&&i.keyCode<=57||i.keyCode>=96&&i.keyCode<=105||i.keyCode>=65&&i.keyCode<=90)&&(f.options.container?f.$newElement.trigger("click"):(f.setSize(),f.$menu.parent().addClass("open"),c=!0),f.$searchbox.focus()),f.options.liveSearch&&(/(^9$|27)/.test(i.keyCode.toString(10))&&c&&0===f.$menu.find(".active").length&&(i.preventDefault(),f.$menu.parent().removeClass("open"),f.options.container&&f.$newElement.removeClass("open"),f.$button.focus()),n=t("[role=menu] li"+m,u),p.val()||/(38|40)/.test(i.keyCode.toString(10))||0===n.filter(".active").length&&(n=f.$menuInner.find("li"),n=f.options.liveSearchNormalize?n.filter(":a"+f._searchStyle()+"("+e(g[i.keyCode])+")"):n.filter(":"+f._searchStyle()+"("+g[i.keyCode]+")"))),n.length){if(/(38|40)/.test(i.keyCode.toString(10)))o=n.index(n.find("a").filter(":focus").parent()),a=n.filter(m).first().index(),r=n.filter(m).last().index(),s=n.eq(o).nextAll(m).eq(0).index(),l=n.eq(o).prevAll(m).eq(0).index(),d=n.eq(s).prevAll(m).eq(0).index(),f.options.liveSearch&&(n.each(function(e){t(this).hasClass("disabled")||t(this).data("index",e)}),o=n.index(n.filter(".active")),a=n.first().data("index"),r=n.last().data("index"),s=n.eq(o).nextAll().eq(0).data("index"),l=n.eq(o).prevAll().eq(0).data("index"),d=n.eq(s).prevAll().eq(0).data("index")),h=p.data("prevIndex"),38==i.keyCode?(f.options.liveSearch&&o--,o!=d&&o>l&&(o=l),o<a&&(o=a),o==h&&(o=r)):40==i.keyCode&&(f.options.liveSearch&&o++,o==-1&&(o=0),o!=d&&o<s&&(o=s),o>r&&(o=r),o==h&&(o=a)),p.data("prevIndex",o),f.options.liveSearch?(i.preventDefault(),p.hasClass("dropdown-toggle")||(n.removeClass("active").eq(o).addClass("active").children("a").focus(),p.focus())):n.eq(o).children("a").focus();else if(!p.is("input")){var v,y,b=[];n.each(function(){t(this).hasClass("disabled")||t.trim(t(this).children("a").text().toLowerCase()).substring(0,1)==g[i.keyCode]&&b.push(t(this).index())}),v=t(document).data("keycount"),v++,t(document).data("keycount",v),y=t.trim(t(":focus").text().toLowerCase()).substring(0,1),y!=g[i.keyCode]?(v=1,t(document).data("keycount",v)):v>=b.length&&(t(document).data("keycount",0),v>b.length&&(v=1)),n.eq(b[v-1]).children("a").focus()}if((/(13|32)/.test(i.keyCode.toString(10))||/(^9$)/.test(i.keyCode.toString(10))&&f.options.selectOnTab)&&c){if(/(32)/.test(i.keyCode.toString(10))||i.preventDefault(),f.options.liveSearch)/(32)/.test(i.keyCode.toString(10))||(f.$menuInner.find(".active a").click(),p.focus());else{var w=t(":focus");w.click(),w.focus(),i.preventDefault(),t(document).data("spaceSelect",!0)}t(document).data("keycount",0)}(/(^9$|27)/.test(i.keyCode.toString(10))&&c&&(f.multiple||f.options.liveSearch)||/(27)/.test(i.keyCode.toString(10))&&!c)&&(f.$menu.parent().removeClass("open"),f.options.container&&f.$newElement.removeClass("open"),f.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.liObj={},this.reloadLi(),this.render(),this.checkDisabled(),this.liHeight(!0),this.setStyle(),this.setWidth(),this.$lis&&this.$searchbox.trigger("propertychange"),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var s=t.fn.selectpicker;t.fn.selectpicker=n,t.fn.selectpicker.Constructor=o,t.fn.selectpicker.noConflict=function(){return t.fn.selectpicker=s,this},t(document).data("keycount",0).on("keydown.bs.select",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',o.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle=dropdown], .bootstrap-select [role="menu"], .bs-searchbox input',function(t){t.stopPropagation()}),t(window).on("load.bs.select.data-api",function(){t(".selectpicker").each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),function(t){t.extend({debounce:function(t,e,i,n){3==arguments.length&&"boolean"!=typeof i&&(n=i,i=!1);var o;return function(){var s=arguments;n=n||this,i&&!o&&t.apply(n,s),clearTimeout(o),o=setTimeout(function(){!i&&t.apply(n,s),o=null},e)}},throttle:function(t,e,i){var n,o,s;return function(){o=arguments,s=!0,i=i||this,n||!function(){s?(t.apply(i,o),s=!1,n=setTimeout(arguments.callee,e)):n=null}()}}})}(jQuery),"undefined"!=typeof window.localStorage&&"undefined"!=typeof window.sessionStorage||function(){var t=function(t){function e(t,e,i){var n,o;i?(n=new Date,n.setTime(n.getTime()+24*i*60*60*1e3),o="; expires="+n.toGMTString()):o="",document.cookie=t+"="+e+o+"; path=/"}function i(t){var e,i,n=t+"=",o=document.cookie.split(";");for(e=0;e<o.length;e++){for(i=o[e];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(n))return i.substring(n.length,i.length)}return null}function n(i){i=JSON.stringify(i),"session"==t?window.name=i:e("localStorage",i,365)}function o(){"session"==t?window.name="":e("localStorage","",365)}function s(){var e="session"==t?window.name:i("localStorage");return e?JSON.parse(e):{}}var a=s();return{length:0,clear:function(){a={},this.length=0,o()},getItem:function(t){return void 0===a[t]?null:a[t]},key:function(t){var e=0;for(var i in a){if(e==t)return i;e++}return null},removeItem:function(t){delete a[t],this.length--,n(a)},setItem:function(t,e){a[t]=e+"",this.length++,n(a)}}};"undefined"==typeof window.localStorage&&(window.localStorage=new t("local")),"undefined"==typeof window.sessionStorage&&(window.sessionStorage=new t("session"))}(),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper"],t):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=t(window.blueimp.helper||window.jQuery))}(function(t){"use strict";function e(t,i){return void 0===document.body.style.maxHeight?null:this&&this.options===e.prototype.options?t&&t.length?(this.list=t,this.num=t.length,this.initOptions(i),void this.initialize()):void this.console.log("blueimp Gallery: No or empty list provided as first argument.",t):new e(t,i)}return t.extend(e.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:void 0,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&"function"==typeof window.console.log?window.console:{log:function(){}},support:function(e){var i={touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},n={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}},o=function(){var t,n,o=i.transition;document.body.appendChild(e),o&&(t=o.name.slice(0,-9)+"ransform",void 0!==e.style[t]&&(e.style[t]="translateZ(0)",n=window.getComputedStyle(e).getPropertyValue(o.prefix+"transform"),i.transform={prefix:o.prefix,name:t,translate:!0,translateZ:!!n&&"none"!==n})),void 0!==e.style.backgroundSize&&(i.backgroundSize={},e.style.backgroundSize="contain",i.backgroundSize.contain="contain"===window.getComputedStyle(e).getPropertyValue("background-size"),e.style.backgroundSize="cover",i.backgroundSize.cover="cover"===window.getComputedStyle(e).getPropertyValue("background-size")),document.body.removeChild(e)};return function(t,i){var n;for(n in i)if(i.hasOwnProperty(n)&&void 0!==e.style[n]){t.transition=i[n],t.transition.name=n;break}}(i,n),document.body?o():t(document).on("DOMContentLoaded",o),i}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,initialize:function(){return this.initStartIndex(),this.initWidget()!==!1&&(this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),void(this.options.startSlideshow&&this.play()))},slide:function(t,e){window.clearTimeout(this.timeout);var i,n,o,s=this.index;if(s!==t&&1!==this.num){if(e||(e=this.options.transitionSpeed),this.support.transform){for(this.options.continuous||(t=this.circle(t)),i=Math.abs(s-t)/(s-t),this.options.continuous&&(n=i,i=-this.positions[this.circle(t)]/this.slideWidth,i!==n&&(t=-i*this.num+t)),o=Math.abs(s-t)-1;o;)o-=1,this.move(this.circle((t>s?t:s)-o-1),this.slideWidth*i,0);t=this.circle(t),this.move(s,this.slideWidth*i,e),this.move(t,0,e),this.options.continuous&&this.move(this.circle(t-i),-(this.slideWidth*i),0)}else t=this.circle(t),this.animate(s*-this.slideWidth,t*-this.slideWidth,e);this.onslide(t)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(t){var e=this;window.clearTimeout(this.timeout),this.interval=t||this.options.slideshowInterval,this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(t,i){e.animationFrameId=e.requestAnimationFrame.call(window,function(){e.slide(t,i)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval)),this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.container.removeClass(this.options.playingClass)},add:function(t){var e;for(t.concat||(t=Array.prototype.slice.call(t)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(t),this.num=this.list.length,this.num>2&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),e=this.num-t.length;e<this.num;e+=1)this.addSlide(e),this.positionSlide(e);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[]},handleClose:function(){var t=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(t.displayClass).removeClass(t.singleClass).removeClass(t.leftEdgeClass).removeClass(t.rightEdgeClass),t.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var t=this,e=function(i){i.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleClose())};this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,e),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(t){return(this.num+t%this.num)%this.num},move:function(t,e,i){this.translateX(t,e,i),this.positions[t]=e},translate:function(t,e,i,n){var o=this.slides[t].style,s=this.support.transition,a=this.support.transform;o[s.name+"Duration"]=n+"ms",o[a.name]="translate("+e+"px, "+i+"px)"+(a.translateZ?" translateZ(0)":"")},translateX:function(t,e,i){this.translate(t,e,0,i)},translateY:function(t,e,i){this.translate(t,0,e,i)},animate:function(t,e,i){if(!i)return void(this.slidesContainer[0].style.left=e+"px");var n=this,o=(new Date).getTime(),s=window.setInterval(function(){var a=(new Date).getTime()-o;return a>i?(n.slidesContainer[0].style.left=e+"px",n.ontransitionend(),void window.clearInterval(s)):void(n.slidesContainer[0].style.left=(e-t)*(Math.floor(a/i*100)/100)+t+"px")},4)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(t){t.which&&1===t.which&&"VIDEO"!==t.target.nodeName&&(t.preventDefault(),(t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchstart(t))},onmousemove:function(t){this.touchStart&&((t.originalEvent||t).touches=[{pageX:t.pageX,pageY:t.pageY}],this.ontouchmove(t))},onmouseup:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},onmouseout:function(e){if(this.touchStart){var i=e.target,n=e.relatedTarget;n&&(n===i||t.contains(i,n))||this.onmouseup(e)}},ontouchstart:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e=(t.originalEvent||t).touches[0];this.touchStart={x:e.pageX,y:e.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e,i,n=(t.originalEvent||t).touches[0],o=(t.originalEvent||t).scale,s=this.index;if(!(n.length>1||o&&1!==o))if(this.options.disableScroll&&t.preventDefault(),this.touchDelta={x:n.pageX-this.touchStart.x,y:n.pageY-this.touchStart.y},e=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(e)<Math.abs(this.touchDelta.y)),this.isScrolling)this.options.closeOnSwipeUpOrDown&&this.translateY(s,this.touchDelta.y+this.positions[s],0);else for(t.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?i=[this.circle(s+1),s,this.circle(s-1)]:(this.touchDelta.x=e/=!s&&e>0||s===this.num-1&&e<0?Math.abs(e)/this.slideWidth+1:1,i=[s],s&&i.push(s-1),s<this.num-1&&i.unshift(s+1));i.length;)s=i.pop(),this.translateX(s,e+this.positions[s],0)},ontouchend:function(t){this.options.stopTouchEventsPropagation&&this.stopPropagation(t);var e,i,n,o,s,a=this.index,r=this.options.transitionSpeed,l=this.slideWidth,d=Number(Date.now()-this.touchStart.time)<250,h=d&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>l/2,c=!a&&this.touchDelta.x>0||a===this.num-1&&this.touchDelta.x<0,p=!h&&this.options.closeOnSwipeUpOrDown&&(d&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2);this.options.continuous&&(c=!1),e=this.touchDelta.x<0?-1:1,this.isScrolling?p?this.close():this.translateY(a,0,r):h&&!c?(i=a+e,n=a-e,o=l*e,s=-l*e,this.options.continuous?(this.move(this.circle(i),o,0),this.move(this.circle(a-2*e),s,0)):i>=0&&i<this.num&&this.move(i,o,0),this.move(a,this.positions[a]+o,r),this.move(this.circle(n),this.positions[this.circle(n)]+o,r),a=this.circle(n),this.onslide(a)):this.options.continuous?(this.move(this.circle(a-1),-l,r),this.move(a,0,r),this.move(this.circle(a+1),l,r)):(a&&this.move(a-1,-l,r),this.move(a,0,r),a<this.num-1&&this.move(a+1,l,r))},ontouchcancel:function(t){this.touchStart&&(this.ontouchend(t),delete this.touchStart)},ontransitionend:function(t){var e=this.slides[this.index];t&&e!==t.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,e]))},oncomplete:function(e){var i,n=e.target||e.srcElement,o=n&&n.parentNode;n&&o&&(i=this.getNodeIndex(o),t(o).removeClass(this.options.slideLoadingClass),"error"===e.type?(t(o).addClass(this.options.slideErrorClass),this.elements[i]=3):this.elements[i]=2,n.clientHeight>this.container[0].clientHeight&&(n.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===o&&this.play(),this.setTimeout(this.options.onslidecomplete,[i,o]))},onload:function(t){this.oncomplete(t)},onerror:function(t){this.oncomplete(t)},onkeydown:function(t){switch(t.which||t.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(t),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),t.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(t),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(t),this.next())}},handleClick:function(e){var i=this.options,n=e.target||e.srcElement,o=n.parentNode,s=function(e){return t(n).hasClass(e)||t(o).hasClass(e)};s(i.toggleClass)?(this.preventDefault(e),this.toggleControls()):s(i.prevClass)?(this.preventDefault(e),this.prev()):s(i.nextClass)?(this.preventDefault(e),this.next()):s(i.closeClass)?(this.preventDefault(e),this.close()):s(i.playPauseClass)?(this.preventDefault(e),this.toggleSlideshow()):o===this.slidesContainer[0]?(this.preventDefault(e),i.closeOnSlideClick?this.close():this.toggleControls()):o.parentNode&&o.parentNode===this.slidesContainer[0]&&(this.preventDefault(e),this.toggleControls())},onclick:function(t){return this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)?void delete this.touchDelta:this.handleClick(t)},updateEdgeClasses:function(t){t?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),t===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(t){this.options.continuous||this.updateEdgeClasses(t),this.loadElements(t),this.options.unloadElements&&this.unloadElements(t),this.setTitle(t)},onslide:function(t){this.index=t,this.handleSlide(t),this.setTimeout(this.options.onslide,[t,this.slides[t]])},setTitle:function(t){var e=this.slides[t].firstChild.title,i=this.titleElement;i.length&&(this.titleElement.empty(),e&&i[0].appendChild(document.createTextNode(e)))},setTimeout:function(t,e,i){var n=this;return t&&window.setTimeout(function(){t.apply(n,e||[])},i||0)},imageFactory:function(e,i){var n,o,s,a=this,r=this.imagePrototype.cloneNode(!1),l=e,d=this.options.stretchImages,h=function(e){if(!n){if(e={type:e.type,target:o},!o.parentNode)return a.setTimeout(h,[e]);n=!0,t(r).off("load error",h),d&&"load"===e.type&&(o.style.background='url("'+l+'") center no-repeat',o.style.backgroundSize=d),i(e)}};return"string"!=typeof l&&(l=this.getItemProperty(e,this.options.urlProperty),s=this.getItemProperty(e,this.options.titleProperty)),d===!0&&(d="contain"),d=this.support.backgroundSize&&this.support.backgroundSize[d]&&d,d?o=this.elementPrototype.cloneNode(!1):(o=r,r.draggable=!1),s&&(o.title=s),t(r).on("load error",h),r.src=l,o},createElement:function(e,i){var n=e&&this.getItemProperty(e,this.options.typeProperty),o=n&&this[n.split("/")[0]+"Factory"]||this.imageFactory,s=e&&o.call(this,e,i);return s||(s=this.elementPrototype.cloneNode(!1),this.setTimeout(i,[{type:"error",target:s}])),t(s).addClass(this.options.slideContentClass),s},loadElement:function(e){this.elements[e]||(this.slides[e].firstChild?this.elements[e]=t(this.slides[e]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[e]=1,t(this.slides[e]).addClass(this.options.slideLoadingClass),this.slides[e].appendChild(this.createElement(this.list[e],this.proxyListener))))},loadElements:function(t){var e,i=Math.min(this.num,2*this.options.preloadRange+1),n=t;for(e=0;e<i;e+=1)n+=e*(e%2===0?-1:1),n=this.circle(n),this.loadElement(n)},unloadElements:function(t){var e,i;for(e in this.elements)this.elements.hasOwnProperty(e)&&(i=Math.abs(t-e),i>this.options.preloadRange&&i+this.options.preloadRange<this.num&&(this.unloadSlide(e),delete this.elements[e]))},addSlide:function(t){var e=this.slidePrototype.cloneNode(!1);e.setAttribute("data-index",t),this.slidesContainer[0].appendChild(e),this.slides.push(e)},positionSlide:function(t){var e=this.slides[t];e.style.width=this.slideWidth+"px",this.support.transform&&(e.style.left=t*-this.slideWidth+"px",this.move(t,this.index>t?-this.slideWidth:this.index<t?this.slideWidth:0,0))},initSlides:function(e){var i,n;for(e||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),t(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,i=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",i&&this.resetSlides(),n=0;n<this.num;n+=1)i&&this.addSlide(n),this.positionSlide(n);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},unloadSlide:function(t){var e,i;e=this.slides[t],i=e.firstChild,null!==i&&e.removeChild(i)},unloadAllSlides:function(){var t,e;for(t=0,e=this.slides.length;t<e;t++)this.unloadSlide(t)},toggleControls:function(){var t=this.options.controlsClass;this.container.hasClass(t)?this.container.removeClass(t):this.container.addClass(t)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(t){return parseInt(t.getAttribute("data-index"),10)},getNestedProperty:function(t,e){return e.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(e,i,n,o,s){var a=s||i||n||o&&parseInt(o,10);e&&t&&(t=t[a])}),t},getDataProperty:function(e,i){if(e.getAttribute){var n=e.getAttribute("data-"+i.replace(/([A-Z])/g,"-$1").toLowerCase());if("string"==typeof n){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(n))try{return t.parseJSON(n)}catch(o){}return n}}},getItemProperty:function(t,e){var i=t[e];return void 0===i&&(i=this.getDataProperty(t,e),void 0===i&&(i=this.getNestedProperty(t,e))),i},initStartIndex:function(){var t,e=this.options.index,i=this.options.urlProperty;if(e&&"number"!=typeof e)for(t=0;t<this.num;t+=1)if(this.list[t]===e||this.getItemProperty(this.list[t],i)===this.getItemProperty(e,i)){e=t;break}this.index=this.circle(parseInt(e,10)||0)},initEventListeners:function(){var e=this,i=this.slidesContainer,n=function(t){var i=e.support.transition&&e.support.transition.end===t.type?"transitionend":t.type;e["on"+i](t)};t(window).on("resize",n),t(document.body).on("keydown",n),this.container.on("click",n),this.support.touch?i.on("touchstart touchmove touchend touchcancel",n):this.options.emulateTouchEvents&&this.support.transition&&i.on("mousedown mousemove mouseup mouseout",n),this.support.transition&&i.on(this.support.transition.end,n),this.proxyListener=n},destroyEventListeners:function(){var e=this.slidesContainer,i=this.proxyListener;t(window).off("resize",i),t(document.body).off("keydown",i),this.container.off("click",i),this.support.touch?e.off("touchstart touchmove touchend touchcancel",i):this.options.emulateTouchEvents&&this.support.transition&&e.off("mousedown mousemove mouseup mouseout",i),this.support.transition&&e.off(this.support.transition.end,i)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var e=this,i=function(t){t.target===e.container[0]&&(e.container.off(e.support.transition.end,i),e.handleOpen())};return this.container=t(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,i):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1)):(this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1)},initOptions:function(e){this.options=t.extend({},this.options),(e&&e.carousel||this.options.carousel&&(!e||e.carousel!==!1))&&t.extend(this.options,this.carouselOptions),t.extend(this.options,e),this.num<3&&(this.options.continuous=!!this.options.continuous&&null),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";t.extend(e.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"});var i=e.prototype.handleSlide;return t.extend(e.prototype,{handleSlide:function(t){i.call(this,t),this.playingVideo&&this.playingVideo.pause()},videoFactory:function(e,i,n){var o,s,a,r,l,d=this,h=this.options,c=this.elementPrototype.cloneNode(!1),p=t(c),u=[{type:"error",target:c}],f=n||document.createElement("video"),m=this.getItemProperty(e,h.urlProperty),g=this.getItemProperty(e,h.typeProperty),v=this.getItemProperty(e,h.titleProperty),y=this.getItemProperty(e,h.videoPosterProperty),b=this.getItemProperty(e,h.videoSourcesProperty);if(p.addClass(h.videoContentClass),v&&(c.title=v),f.canPlayType)if(m&&g&&f.canPlayType(g))f.src=m;else for(;b&&b.length;)if(s=b.shift(),m=this.getItemProperty(s,h.urlProperty),g=this.getItemProperty(s,h.typeProperty),m&&g&&f.canPlayType(g)){f.src=m;break}return y&&(f.poster=y,o=this.imagePrototype.cloneNode(!1),t(o).addClass(h.toggleClass),o.src=y,o.draggable=!1,c.appendChild(o)),a=document.createElement("a"),a.setAttribute("target","_blank"),n||a.setAttribute("download",v),a.href=m,f.src&&(f.controls=!0,(n||t(f)).on("error",function(){d.setTimeout(i,u)}).on("pause",function(){r=!1,p.removeClass(d.options.videoLoadingClass).removeClass(d.options.videoPlayingClass),l&&d.container.addClass(d.options.controlsClass),delete d.playingVideo,d.interval&&d.play()}).on("playing",function(){r=!1,p.removeClass(d.options.videoLoadingClass).addClass(d.options.videoPlayingClass),d.container.hasClass(d.options.controlsClass)?(l=!0,
d.container.removeClass(d.options.controlsClass)):l=!1}).on("play",function(){window.clearTimeout(d.timeout),r=!0,p.addClass(d.options.videoLoadingClass),d.playingVideo=f}),t(a).on("click",function(t){d.preventDefault(t),r?f.pause():f.play()}),c.appendChild(n&&n.element||f)),c.appendChild(a),this.setTimeout(i,[{type:"load",target:c}]),c}}),e}),function(t){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],t):t(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(t,e){"use strict";if(!window.postMessage)return e;t.extend(e.prototype.options,{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!0});var i=e.prototype.textFactory||e.prototype.imageFactory,n=function(t,e,i){this.videoId=t,this.playerVars=e,this.clickToPlay=i,this.element=document.createElement("div"),this.listeners={}};return t.extend(n.prototype,{canPlayType:function(){return!0},on:function(t,e){return this.listeners[t]=e,this},loadAPI:function(){var t,e=this,i=window.onYouTubeIframeAPIReady,n="//www.youtube.com/iframe_api",o=document.getElementsByTagName("script"),s=o.length;for(window.onYouTubeIframeAPIReady=function(){i&&i.apply(this),e.playOnReady&&e.play()};s;)if(s-=1,o[s].src===n)return;t=document.createElement("script"),t.src=n,o[0].parentNode.insertBefore(t,o[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){e.prototype.setTimeout.call(this,this.checkSeek,null,2e3)},checkSeek:function(){this.stateChange!==YT.PlayerState.PAUSED&&this.stateChange!==YT.PlayerState.ENDED||(this.listeners.pause(),delete this.playStatus)},onStateChange:function(t){switch(t.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.PAUSED:case YT.PlayerState.ENDED:this.onPause()}this.stateChange=t.data},onError:function(t){this.listeners.error(t)},play:function(){var t=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){t.onReady()},onStateChange:function(e){t.onStateChange(e)},onError:function(e){t.onError(e)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),t.extend(e.prototype,{YouTubePlayer:n,textFactory:function(t,e){var o=this.options,s=this.getItemProperty(t,o.youTubeVideoIdProperty);return s?(void 0===this.getItemProperty(t,o.urlProperty)&&(t[o.urlProperty]="//www.youtube.com/watch?v="+s),void 0===this.getItemProperty(t,o.videoPosterProperty)&&(t[o.videoPosterProperty]="//img.youtube.com/vi/"+s+"/maxresdefault.jpg"),this.videoFactory(t,e,new n(s,o.youTubePlayerVars,o.youTubeClickToPlay))):i.call(this,t,e)}}),e}),function(t){t.fn.unveil=function(e,i){function n(){var e=d.filter(function(){var e=t(this);if(!e.is(":hidden")){var i=s.scrollTop(),n=i+s.height(),o=e.offset().top,r=o+e.height();return r>=i-a&&o<=n+a}});o=e.trigger("unveil"),d=d.not(o)}var o,s=t(window),a=e||0,r=window.devicePixelRatio>1,l=r?"data-src-retina":"data-src",d=this;return this.one("unveil",function(){var t=this.getAttribute(l);t=t||this.getAttribute("data-src"),t&&(this.setAttribute("src",t),"function"==typeof i&&i.call(this))}),s.on("scroll.unveil resize.unveil lookup.unveil",n),n(),this}}(window.jQuery||window.Zepto),function(t){"use strict";var e=function(t,i){var n=/[^\w\-\.:]/.test(t)?new Function(e.arg+",tmpl","var _e=tmpl.encode"+e.helper+",_s='"+t.replace(e.regexp,e.func)+"';return _s;"):e.cache[t]=e.cache[t]||e(e.load(t));return i?n(i,e):function(t){return n(t,e)}};e.cache={},e.load=function(t){return document.getElementById(t).innerHTML},e.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,e.func=function(t,e,i,n,o,s){return e?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[e]||"\\"+e:i?"="===i?"'+_e("+n+")+'":"'+("+n+"==null?'':"+n+")+'":o?"';":s?"_s+='":void 0},e.encReg=/[<>&"'\x00]/g,e.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},e.encode=function(t){return(null==t?"":""+t).replace(e.encReg,function(t){return e.encMap[t]||""})},e.arg="o",e.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return e}):t.tmpl=e}(this),function(t){function e(e,n,o){var s=this;return this.on("click.pjax",e,function(e){var a=t.extend({},m(n,o));a.container||(a.container=t(this).attr("data-pjax")||s),i(e,a)})}function i(e,i,n){n=m(i,n);var s=e.currentTarget;if("A"!==s.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||location.protocol!==s.protocol||location.hostname!==s.hostname||s.href.indexOf("#")>-1&&f(s)==f(location)||e.isDefaultPrevented())){var a={url:s.href,container:t(s).attr("data-pjax"),target:s},r=t.extend({},a,n),l=t.Event("pjax:click");t(s).trigger(l,[r]),l.isDefaultPrevented()||(o(r),e.preventDefault(),t(s).trigger("pjax:clicked",[r]))}}function n(e,i,n){n=m(i,n);var s=e.currentTarget,a=t(s);if("FORM"!==s.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var r={type:(a.attr("method")||"GET").toUpperCase(),url:a.attr("action"),container:a.attr("data-pjax"),target:s};if("GET"!==r.type&&void 0!==window.FormData)r.data=new FormData(s),r.processData=!1,r.contentType=!1;else{if(t(s).find(":file").length)return;r.data=t(s).serializeArray()}o(t.extend({},r,n)),e.preventDefault()}function o(e){function i(e,i,o){o||(o={}),o.relatedTarget=n;var s=t.Event(e,o);return r.trigger(s,i),!s.isDefaultPrevented()}e=t.extend(!0,{},t.ajaxSettings,o.defaults,e),t.isFunction(e.url)&&(e.url=e.url());var n=e.target,s=u(e.url).hash,r=e.context=g(e.container);e.data||(e.data={}),t.isArray(e.data)?e.data.push({name:"_pjax",value:r.selector}):e.data._pjax=r.selector;var l;e.beforeSend=function(t,n){if("GET"!==n.type&&(n.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",r.selector),!i("pjax:beforeSend",[t,n]))return!1;n.timeout>0&&(l=setTimeout(function(){i("pjax:timeout",[t,e])&&t.abort("timeout")},n.timeout),n.timeout=0);var o=u(n.url);s&&(o.hash=s),e.requestUrl=p(o)},e.complete=function(t,n){l&&clearTimeout(l),i("pjax:complete",[t,n,e]),i("pjax:end",[t,e])},e.error=function(t,n,o){var s=b("",t,e),r=i("pjax:error",[t,n,o,e]);"GET"==e.type&&"abort"!==n&&r&&a(s.url)},e.success=function(n,l,d){var c=o.state,p="function"==typeof t.pjax.defaults.version?t.pjax.defaults.version():t.pjax.defaults.version,f=d.getResponseHeader("X-PJAX-Version"),m=b(n,d,e),g=u(m.url);if(s&&(g.hash=s,m.url=g.href),p&&f&&p!==f)return void a(m.url);if(!m.contents)return void a(m.url);o.state={id:e.id||h(),url:m.url,title:m.title,container:r.selector,fragment:e.fragment,timeout:e.timeout},(e.push||e.replace)&&window.history.replaceState(o.state,m.title,m.url);var v=t.contains(e.container,document.activeElement);if(v)try{document.activeElement.blur()}catch(y){}m.title&&(document.title=m.title),i("pjax:beforeReplace",[m.contents,e],{state:o.state,previousState:c}),r.html(m.contents);var $=r.find("input[autofocus], textarea[autofocus]").last()[0];$&&document.activeElement!==$&&$.focus(),w(m.scripts);var C=e.scrollTo;if(s){var x=decodeURIComponent(s.slice(1)),S=document.getElementById(x)||document.getElementsByName(x)[0];S&&(C=t(S).offset().top)}"number"==typeof C&&t(window).scrollTop(C),i("pjax:success",[n,l,d,e])},o.state||(o.state={id:h(),url:window.location.href,title:document.title,container:r.selector,fragment:e.fragment,timeout:e.timeout},window.history.replaceState(o.state,document.title)),d(o.xhr),o.options=e;var f=o.xhr=t.ajax(e);return f.readyState>0&&(e.push&&!e.replace&&($(o.state.id,c(r)),window.history.pushState(null,"",e.requestUrl)),i("pjax:start",[f,e]),i("pjax:send",[f,e])),o.xhr}function s(e,i){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return o(t.extend(n,m(e,i)))}function a(t){window.history.replaceState(null,"",o.state.url),window.location.replace(t)}function r(e){D||d(o.xhr);var i,n=o.state,s=e.state;if(s&&s.container){if(D&&I==s.url)return;if(n){if(n.id===s.id)return;i=n.id<s.id?"forward":"back"}var r=O[s.id]||[],l=t(r[0]||s.container),h=r[1];if(l.length){n&&C(i,n.id,c(l));var p=t.Event("pjax:popstate",{state:s,direction:i});l.trigger(p);var u={id:s.id,url:s.url,container:l,push:!1,fragment:s.fragment,timeout:s.timeout,scrollTo:!1};if(h){l.trigger("pjax:start",[null,u]),o.state=s,s.title&&(document.title=s.title);var f=t.Event("pjax:beforeReplace",{state:s,previousState:n});l.trigger(f,[h,u]),l.html(h),l.trigger("pjax:end",[null,u])}else o(u);l[0].offsetHeight}else a(location.href)}D=!1}function l(e){var i=t.isFunction(e.url)?e.url():e.url,n=e.type?e.type.toUpperCase():"GET",o=t("<form>",{method:"GET"===n?"GET":"POST",action:i,style:"display:none"});"GET"!==n&&"POST"!==n&&o.append(t("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var s=e.data;if("string"==typeof s)t.each(s.split("&"),function(e,i){var n=i.split("=");o.append(t("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if(t.isArray(s))t.each(s,function(e,i){o.append(t("<input>",{type:"hidden",name:i.name,value:i.value}))});else if("object"==typeof s){var a;for(a in s)o.append(t("<input>",{type:"hidden",name:a,value:s[a]}))}t(document.body).append(o),o.submit()}function d(e){e&&e.readyState<4&&(e.onreadystatechange=t.noop,e.abort())}function h(){return(new Date).getTime()}function c(t){var e=t.clone();return e.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),[t.selector,e.contents()]}function p(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,""),t.href.replace(/\?($|#)/,"$1")}function u(t){var e=document.createElement("a");return e.href=t,e}function f(t){return t.href.replace(/#.*/,"")}function m(e,i){return e&&i?i.container=e:i=t.isPlainObject(e)?e:{container:e},i.container&&(i.container=g(i.container)),i}function g(e){if(e=t(e),e.length){if(""!==e.selector&&e.context===document)return e;if(e.attr("id"))return t("#"+e.attr("id"));throw"cant get selector for pjax container!"}throw"no pjax container for "+e.selector}function v(t,e){return t.filter(e).add(t.find(e))}function y(e){return t.parseHTML(e,document,!0)}function b(e,i,n){var o={},s=/<html/i.test(e),a=i.getResponseHeader("X-PJAX-URL");if(o.url=a?p(u(a)):n.requestUrl,s)var r=t(y(e.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0])),l=t(y(e.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));else var r=l=t(y(e));if(0===l.length)return o;if(o.title=v(r,"title").last().text(),n.fragment){if("body"===n.fragment)var d=l;else var d=v(l,n.fragment).first();d.length&&(o.contents="body"===n.fragment?d:d.contents(),o.title||(o.title=d.attr("title")||d.data("title")))}else s||(o.contents=l);return o.contents&&(o.contents=o.contents.not(function(){return t(this).is("title")}),o.contents.find("title").remove(),o.scripts=v(o.contents,"script[src]").remove(),o.contents=o.contents.not(o.scripts)),o.title&&(o.title=t.trim(o.title)),o}function w(e){if(e){var i=t("script[src]");e.each(function(){var e=this.src,n=i.filter(function(){return this.src===e});if(!n.length){var o=document.createElement("script"),s=t(this).attr("type");s&&(o.type=s),o.src=t(this).attr("src"),document.head.appendChild(o)}})}}function $(t,e){O[t]=e,j.push(t),x(P,0),x(j,o.defaults.maxCacheLength)}function C(t,e,i){var n,s;O[e]=i,"forward"===t?(n=j,s=P):(n=P,s=j),n.push(e),(e=s.pop())&&delete O[e],x(n,o.defaults.maxCacheLength)}function x(t,e){for(;t.length>e;)delete O[t.shift()]}function S(){return t("meta").filter(function(){var e=t(this).attr("http-equiv");return e&&"X-PJAX-VERSION"===e.toUpperCase()}).attr("content")}function k(){t.fn.pjax=e,t.pjax=o,t.pjax.enable=t.noop,t.pjax.disable=T,t.pjax.click=i,t.pjax.submit=n,t.pjax.reload=s,t.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:S},t(window).on("popstate.pjax",r)}function T(){t.fn.pjax=function(){return this},t.pjax=l,t.pjax.enable=k,t.pjax.disable=t.noop,t.pjax.click=t.noop,t.pjax.submit=t.noop,t.pjax.reload=function(){window.location.reload()},t(window).off("popstate.pjax",r)}var D=!0,I=window.location.href,E=window.history.state;E&&E.container&&(o.state=E),"state"in window.history&&(D=!1);var O={},P=[],j=[];t.inArray("state",t.event.props)<0&&t.event.props.push("state"),t.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),t.support.pjax?k():T()}(jQuery);var Dafi=Dafi||{};Dafi.Controller=Dafi.Controller||{},Dafi.View=Dafi.View||{},Dafi.Helper=Dafi.Helper||{},Dafi.Helper.User={isTouchScreen:function(){try{return document.createEvent("TouchEvent"),!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}catch(t){return!1}},supportLocalStorage:function(){var t="DAFI_test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}},Dafi.View.Body={init:function(){this.$el=$("body")},changeStateOfOverflow:function(){this.$el.toggleClass("overflow-hidden")},resetStateOfOverflow:function(){this.$el.removeClass("overflow-hidden")}},Dafi.View.pjaxContainer={init:function(){this.$el=$("[data-pjax-container]")}},Dafi.View.Map={options:{defaultColor:"#989a9b",hoverColor:"#f16521",activeColor:"#f16521"},init:function(t){var e,i,n,o,s,a,r,l,d,h,c;"undefined"==typeof t&&(t=$('[data-svg-map="container"]')),t.length&&(e=this,n=$("[data-shops]"),o=n.find("[data-trading-object]"),s=t.find("[data-trading-object]"),this.$popoverMain=this.popover.create("popover-main"),this.$popoverShopInfo=this.popover.create("popover-shopinfo","right"),s.mouseover(function(n){i=$(this),d=e.getID(i),e.popover.show(e.$popoverMain,d),t.on("mousemove.mapPopover",function(t){e.popover.setCoordinates(e.$popoverMain,{coordinates:{left:t.pageX+15,top:t.pageY+15}})}),"active"!==i.attr("class")&&i.attr("fill",e.options.hoverColor)}).mouseleave(function(){i.attr("fill",e.options.defaultColor),e.popover.hide(e.$popoverMain),t.off("mousemove.mapPopover")}).click(function(t){var o,d,h;i=$(this),a=i.closest('[data-svg-map="container"]'),h=a.attr("data-map-click"),d=e.getID(i,"data-trading-object"),(o=e.getID(i))&&("scroll"===h?(r=n.find('[data-trading-object="'+d+'"]'),r.length&&(l=r.offset().top,l>0&&$("html, body").animate({scrollTop:l},1e3))):"load"===h&&(s.removeAttr("class"),i.attr("class","active"),i.attr("fill",e.options.defaultColor),loadTradingObject(o,function(t){n.html(t),Dafi.View.LazyLoad.init(),Dafi.View.MediaItems.init()})))}),t.find("svg").mouseover(function(){e.$popoverShopInfo.hasClass("active")&&(c=!0,h={coordinates:{top:e.$popoverShopInfo.css("top"),left:e.$popoverShopInfo.css("left")},isShopInfo:!0,type:e.$popoverShopInfo.hasClass("right")?"right":"left"},e.popover.hide(e.$popoverShopInfo,!0))}).mouseleave(function(){c?(e.popover.show(e.$popoverShopInfo),e.popover.setCoordinates(e.$popoverShopInfo,h),c=!1):e.popover.hide(e.$popoverShopInfo)}),$(window).resize($.throttle(function(){e.popover.shop.call(e,n.find(".collapse.in").find('[data-svg-map="container"]'),e.$popoverShopInfo,!0)},250)),"true"!==t.attr("data-map-loaded")&&o.length&&o.each(function(t,i){var n=$(i),o=e.getID(n,"data-trading-object"),a=s.filter('[data-trading-object="'+o+'"]');a.length&&a.attr("fill",e.options.activeColor).attr("class","active")}))},hide:function(){this.popover.hide(this.$popoverMain),this.popover.hide(this.$popoverShopInfo),$("[data-shops]").find(".panel-collapse").has('[data-svg-map="container"]').collapse("hide")},initCollapse:function(){var t,e,i,n,o,s,a;t=this,s=$("[data-shops]"),s.find(".panel-collapse").has('[data-svg-map="container"]').on("shown.bs.collapse",function(){n=$(this),a=n.find('[data-svg-map="container"]'),e=t.getID(n),i=t.getID(n,"data-floor-id"),a.attr("data-map-loaded")||Dafi.View.MapPreloader.appendTo(a),loadMap(i,function(i){a.attr("data-map-loaded","true").html(i),Dafi.View.Map.init(n.find('[data-svg-map="container"]')),o=n.find("#map-shop"+e),"active"!==o.attr("class")&&o.attr("class","active").attr("fill",t.options.hoverColor),t.popover.shop.call(t,n,t.$popoverShopInfo)})}),s.find(".panel-collapse").on("hide.bs.collapse",function(){t.popover.hide(t.$popoverShopInfo)})},getID:function(t,e){var i;return"undefined"==typeof e&&(e="id"),i=$(t).attr(e),!!i&&parseInt(i.match(/\d+/)[0])},popover:{create:function(t){return $('[data-svg-map="'+t+'"]').length<1?$("<div/>",{"class":"popover popover-shop"}).attr({"data-svg-map":t}).appendTo(Dafi.View.pjaxContainer.$el):$('[data-svg-map="'+t+'"]')},show:function(t,e){e&&this.setHTML(t,e),t.text().length&&t.addClass("active")},hide:function(t,e){t.removeClass("active").removeAttr("style"),e||t.text("")},setCoordinates:function(t,e){var i,n,o;o=t.outerWidth(!0),i=e.coordinates.left,e.isShopInfo&&(n="right"),i+o+100>window.innerWidth&&(i-=o,e.isShopInfo===!0?("object"==typeof e.element&&(i-=e.element.width),n="left"):i-=15),t.css({top:e.coordinates.top,left:i}),e.type&&(n=e.type),this.setType(t,n)},setHTML:function(t,e){t.html(tmpl("svg-map-popover-template",shopsData[e]))},setType:function(t,e){t.removeClass("left").removeClass("right"),"string"==typeof e&&t.addClass(e)},shop:function(t,e,i){var n,o,s,a,r;!e.hasClass("active")&&i||(s=t.find(".active"),s.length>0&&(n=s.offset(),a=s[0].getBoundingClientRect().width,r=s[0].getBoundingClientRect().height,o=this.getID(t.closest(".panel-collapse")),this.popover.show(e,o),this.popover.setCoordinates(e,{coordinates:{top:n.top-e.outerHeight()/2+r/2,left:n.left+a},element:{width:a},isShopInfo:!0})))}}},Dafi.View.MapPreloader={render:function(){return tmpl("template-map-preloader")},appendTo:function(t){var e=this.render();$(t).append(e)}},Dafi.View.Menu={init:function(){this.$el=$('[data-el="menu"]')},changeState:function(){Dafi.View.Menu.$el.toggleClass("in")},hide:function(){Dafi.View.Menu.$el.removeClass("in")}},Dafi.View.MenuBlackout={isInited:!1,className:"menu__blackout",init:function(){0===$("."+this.className).length&&(this.$el=$("<div/>",{"class":this.className}),this.$el.click(Dafi.View.MenuToggle.toggle),Dafi.View.pjaxContainer.$el.append(this.$el),this.isInited=!0)},toggle:function(){this.isInited&&this.$el.toggleClass("in")},hide:function(){Dafi.View.MenuBlackout.$el.removeClass("in")}},Dafi.View.MenuToggle={isInited:!1,selector:'[data-el="menu-toggle"]',init:function(){this.initOne()},initOne:function(){this.isInited||(this.isInited=!0,this.listen())},listen:function(){$(document).on("click",this.selector,this.toggle)},toggle:function(){Dafi.View.Menu.changeState(),Dafi.View.Body.changeStateOfOverflow(),Dafi.View.MenuBlackout.toggle()},hide:function(){Dafi.View.Menu.hide(),Dafi.View.Body.resetStateOfOverflow(),Dafi.View.MenuBlackout.hide()}},Dafi.View.Select={init:function(){this.$el=$('[data-el="bootstrap-select"]'),this.replaceSelect()},replaceSelect:function(){this.$el.selectpicker({template:{caret:'<span class="appicon appicon-arrow-down"></span>'}})}},Dafi.View.ChangeFontSize={isInited:!1,selector:'[data-el="change-font-size"]',property:"font-2x",init:function(){this.initOne()},initOne:function(){this.isInited||(this.isInited=!0,this.isFont2x()&&this.toggleObject(),this.listen())},listen:function(){var t=this;$(document).on("click",this.selector,function(e){t.toggleObject(),localStorage.setItem(t.property,t.isFont2x()?"nope":"yeap"),e.preventDefault()})},isFont2x:function(){return"yeap"===localStorage.getItem(this.property)},toggleObject:function(){Dafi.View.Body.$el.toggleClass(this.property)}},Dafi.View.ChangeContrast={isInited:!1,selector:'[data-el="change-contrast"]',property:"contrast",init:function(){this.initOne()},initOne:function(){this.isInited||(this.isInited=!0,this.isContrast()&&this.toggleObject(),this.listen())},listen:function(){var t=this;$(document).on("click",this.selector,function(e){t.toggleObject(),localStorage.setItem(t.property,t.isContrast()?"nope":"yeap"),e.preventDefault()})},isContrast:function(){return"yeap"===localStorage.getItem(this.property)},toggleObject:function(){Dafi.View.Body.$el.toggleClass(this.property)}},Dafi.View.LazyLoad={isInited:!1,selector:"img[data-lazyload]",init:function(){$(this.selector).unveil(),this.initOne()},initOne:function(){this.isInited||(this.isInited=!0,this.listenForCollapse())},listenForCollapse:function(){var t=this;$(document).on("shown.bs.collapse",".panel-collapse",function(){$(this).find(t.selector).unveil()})}},Dafi.View.MediaItems={isInited:!1,init:function(){this.initOne()},initOne:function(){this.isInited||(this.isInited=!0,this.listen())},listen:function(){$(document).on("click","[data-media-item]",function(t){var e,i,n=$(this),o=[];i=$(this).closest("[data-blueimp-gallery]"),e=i.find("[data-media-item]").each(function(t,e){e=$(e);var i=e.is("img")?e:e.find("img"),n={href:i.attr("data-src-zoom"),title:i.attr("data-title")};if("video"===i.attr("data-type")){var s=n.href.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i)[1];n.type="text/html",n.youtube=s,n.poster="https://img.youtube.com/vi/"+s+"/0.jpg"}else n.type="text/jpeg";o.push(n)}),blueimp.Gallery(o,{index:e.index(n)}),t.preventDefault()})}},Dafi.View.PagePreloader={isInited:!1,init:function(){this.initOne()},initOne:function(){if(!this.isInited){this.isInited=!0;var t;t=tmpl("template-page-preloader"),Dafi.View.pjaxContainer.$el.append(t),this.$el=$('[data-el="page-preloader"]')}},toggle:function(){this.$el.toggleClass("active")},show:function(){this.$el.addClass("active")},hide:function(){this.$el.removeClass("active")}},Dafi.View.SubscribeLine={options:{lineRestoreTime:1728e5,localStorageItemName:"SubscribeLineClosingTime",delayBeforeShow:3e4},timer:0,init:function(){this.options.delayBeforeShowStorageItemName=this.options.localStorageItemName+".delayBeforeShow",localStorage.setItem(this.options.delayBeforeShowStorageItemName,this.getDelayBeforeShow()),this.$el=$('[data-el="subscribe-line"]'),this.$closeTrigger=$('[data-el="close-subscribe-line"]'),this.listen()},show:function(){this.isNeedShow()&&(this.$el.addClass("active"),this.timeToShow()&&localStorage.removeItem(this.options.localStorageItemName))},hide:function(){this.$el.removeClass("active"),Dafi.Helper.User.supportLocalStorage()&&localStorage.setItem(this.options.localStorageItemName,+new Date)},isNeedShow:function(){return!Dafi.Helper.User.supportLocalStorage()||this.timeToShow()},timeToShow:function(){var t=Dafi.Helper.User.supportLocalStorage(),e=t?localStorage.getItem(this.options.localStorageItemName):0;return+new Date-e>this.options.lineRestoreTime},listen:function(){var t=this;this.$closeTrigger.click(function(e){t.hide.call(t),e.preventDefault()}),this.timer=setInterval(function(){+new Date-t.getDelayBeforeShow()>t.options.delayBeforeShow&&(clearInterval(t.timer),t.show())},1e3)},getDelayBeforeShow:function(){return parseInt(localStorage.getItem(this.options.delayBeforeShowStorageItemName))||+new Date}},Dafi.View.ScrollUp={isInited:!1,selector:'[data-el="change-contrast"]',property:"contrast",init:function(){this.initOne()},initOne:function(){this.isInited||(this.isInited=!0,this.$el=$('[data-el="scroll-up"]'),this.listen())},listen:function(){var t=this,e=$(window),i=$('[data-el="scroll-up-trigger"]'),n=$("html, body"),o="active",s=500;e.scroll(function(i){var n=e.outerHeight(),s=document.body.scrollHeight,a=e.scrollTop(),r=a/(s-n)*100;r>70?t.$el.addClass(o):t.$el.removeClass(o)}),i.click(function(){n.animate({scrollTop:0},s)})}},!function(t){"use strict";var e=function(t,e){this.init(t,e)};e.prototype={constructor:e,init:function(e,i){var n=this;this.options=i,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.$element.on("click",function(t){t.target===n.$element[0]&&n.hide.call(n)}),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote,function(){var e=t.Event("loaded");n.$element.trigger(e)});var o="function"==typeof this.options.manager?this.options.manager.call(this):this.options.manager;o=o.appendModal?o:t(o).modalmanager().data("modalmanager"),o.appendModal(this)},toggle:function(){return this[this._isShown?"hide":"show"]()},show:function(){var e=t.Event("show");this._isShown||(this.$element.trigger(e),e.isDefaultPrevented()||(this.escape(),this.tab(),this.options.loading&&this.loading()))},hide:function(e){return e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),!this._isShown||e.isDefaultPrevented()?this._isShown=!1:(this._isShown=!1,this.escape(),this.tab(),this.isLoading&&this.loading(),t(document).off("focusin.modal"),this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",!0),void(t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()))},layout:function(){var e=this.options.height?"height":"max-height",i=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width)}else this.$element.css("width","");this.$element.find(".modal-body").css("overflow","").css(e,""),i&&this.$element.find(".modal-body").css("overflow","auto").css(e,i);var n=t(window).height()-10<this.$element.height();n||this.options.modalOverflow?this.$element.addClass("modal-overflow"):this.$element.removeClass("modal-overflow")},tab:function(){var e=this;this._isShown&&this.options.consumeTab?this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(i){if(i.keyCode&&9==i.keyCode){var n=t(this),o=t(this);e.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(e){n=e.shiftKey?n.data("tabindex")>t(this).data("tabindex")?n=t(this):o=t(this):n.data("tabindex")<t(this).data("tabindex")?n=t(this):o=t(this)}),n[0]!==t(this)[0]?n.focus():o.focus(),i.preventDefault()}}):this._isShown||this.$element.off("keydown.tabindex.modal")},escape:function(){var t=this;this._isShown&&this.options.keyboard?(this.$element.attr("tabindex")||this.$element.attr("tabindex",-1),this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()})):this._isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,i=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(i),e.hideModal()})},hideModal:function(){var t=this.options.height?"height":"max-height",e=this.options.height||this.options.maxHeight;e&&this.$element.find(".modal-body").css("overflow","").css(t,""),this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading&&this.$loading.remove(),this.$loading=null,this.isLoading=!1},loading:function(e){e=e||function(){};var i=this.$element.hasClass("fade")?"fade":"";if(this.isLoading)if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var n=this;t.support.transition&&this.$element.hasClass("fade")?this.$loading.one(t.support.transition.end,function(){n.removeLoading()}):n.removeLoading()}else e&&e(this.isLoading);else{var o=t.support.transition&&i;this.$loading=t('<div class="loading-mask '+i+'">').append(this.options.spinner).appendTo(this.$element),o&&this.$loading[0].offsetWidth,this.$loading.addClass("in"),this.isLoading=!0,o?this.$loading.one(t.support.transition.end,e):e()}},hold:function(t){this.loading(t),this.$loading.css("opacity",.8)},focus:function(){var t=this.$element.find(this.options.focusOn);t=t.length?t:this.$element,t.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var t=this;setTimeout(function(){t.$element.addClass("animated").addClass(t.options.attentionAnimation)},0)}this.focus()},destroy:function(){var e=t.Event("destroy");this.$element.trigger(e),e.isDefaultPrevented()||this.teardown()},teardown:function(){return this.$parent.length?(this.$parent!==this.$element.parent()&&this.$element.appendTo(this.$parent),this.$element.off(".modal"),this.$element.removeData("modal"),void this.$element.removeClass("in").attr("aria-hidden",!0)):(this.$element.remove(),void(this.$element=null))},isShown:function(){return this._isShown}},t.fn.modal=function(i,n){return this.each(function(){var o=t(this),s=o.data("modal"),a=t.extend({},t.fn.modal.defaults,o.data(),"object"==typeof i&&i);s||o.data("modal",s=new e(this,a)),"string"==typeof i?s[i].apply(s,[].concat(n)):a.show&&s.show()})},t.fn.modal.defaults={keyboard:!0,backdrop:!0,loading:!1,show:!0,width:null,height:null,maxHeight:null,modalOverflow:!1,consumeTab:!0,focusOn:null,replace:!1,resize:!1,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner"><div class="progress progress-striped active"><div class="progress-bar" style="width:100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},t.fn.modal.Constructor=e,t(function(){t(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),n=i.attr("href"),o=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},o.data(),i.data());e.preventDefault(),o.modal(s).one("hide",function(){i.focus()})})})}(window.jQuery),!function(t){"use strict";function e(t){return function(e){if(this===e.target)return t.apply(this,arguments)}}var i=function(t,e){this.init(t,e)};i.prototype={constructor:i,init:function(e,i){if(this.$element=t(e),this.options=t.extend({},t.fn.modalmanager.defaults,this.$element.data(),"object"==typeof i&&i),this.stack=[],this.backdropCount=0,this.options.resize){var n,o=this;t(window).on("resize.modal",function(){n&&clearTimeout(n),n=setTimeout(function(){for(var t=0;t<o.stack.length;t++)o.stack[t]._isShown&&o.stack[t].layout()},10)})}},createModal:function(e,i){t(e).modal(t.extend({manager:this},i))},appendModal:function(i){this.stack.push(i);var n=this;i.$element.on("show.modalmanager",e(function(e){var o=function(){i._isShown=!0;var e=t.support.transition&&i.$element.hasClass("fade");n.$element.toggleClass("modal-open",n.hasOpenModal()).toggleClass("page-overflow",t(window).height()<n.$element.height()),i.$parent=i.$element.parent(),i.$container=n.createContainer(i),i.$element.appendTo(i.$container),n.backdrop(i,function(){i.$element.show(),e&&i.$element[0].offsetWidth,i.layout(),i.$element.addClass("in").attr("aria-hidden",!1);var o=function(){n.setFocus(),i.$element.trigger("shown")};e?i.$element.one(t.support.transition.end,o):o()})};i.options.replace?n.replace(o):o()})),i.$element.on("hidden.modalmanager",e(function(e){if(n.backdrop(i),i.$element.parent().length)if(i.$backdrop){var o=t.support.transition&&i.$element.hasClass("fade");o&&i.$element[0].offsetWidth,t.support.transition&&i.$element.hasClass("fade")?i.$backdrop.one(t.support.transition.end,function(){i.destroy()}):i.destroy()}else i.destroy();else n.destroyModal(i)})),i.$element.on("destroy.modalmanager",e(function(t){n.destroyModal(i)}))},getOpenModals:function(){for(var t=[],e=0;e<this.stack.length;e++)this.stack[e]._isShown&&t.push(this.stack[e]);return t},hasOpenModal:function(){return this.getOpenModals().length>0},setFocus:function(){for(var t,e=0;e<this.stack.length;e++)this.stack[e]._isShown&&(t=this.stack[e]);t&&t.focus()},destroyModal:function(t){t.$element.off(".modalmanager"),t.$backdrop&&this.removeBackdrop(t),this.stack.splice(this.getIndexOfModal(t),1);var e=this.hasOpenModal();this.$element.toggleClass("modal-open",e),e||this.$element.removeClass("page-overflow"),
this.removeContainer(t),this.setFocus()},getModalAt:function(t){return this.stack[t]},getIndexOfModal:function(t){for(var e=0;e<this.stack.length;e++)if(t===this.stack[e])return e},replace:function(i){var n=this.getLastModal();n?(this.$backdropHandle=n.$backdrop,n.$backdrop=null,i&&n.$element.one("hidden",e(t.proxy(i,this))),n.hide()):i&&i()},getLastModal:function(){for(var t,e=0;e<this.stack.length;e++)this.stack[e]._isShown&&(t=this.stack[e]);return t},removeBackdrop:function(t){t.$backdrop.remove(),t.$backdrop=null},createBackdrop:function(e,i){var n;return this.$backdropHandle?(n=this.$backdropHandle,n.off(".modalmanager"),this.$backdropHandle=null,this.isLoading&&this.removeSpinner()):n=t(i).addClass(e).appendTo(this.$element),n},removeContainer:function(t){t.$container.remove(),t.$container=null},createContainer:function(i){var o;return o=t('<div class="modal-scrollable">').css("z-index",n("modal",this.getOpenModals().length)).appendTo(this.$element),i&&"static"!=i.options.backdrop?o.on("click.modal",e(function(t){i.hide()})):i&&o.on("click.modal",e(function(t){i.attention()})),o},backdrop:function(e,i){var o=e.$element.hasClass("fade")?"fade":"",s=e.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(e._isShown&&s){var a=t.support.transition&&o&&!this.$backdropHandle;e.$backdrop=this.createBackdrop(o,e.options.backdropTemplate),e.$backdrop.css("z-index",n("backdrop",this.getOpenModals().length)),a&&e.$backdrop[0].offsetWidth,e.$backdrop.addClass("in"),this.backdropCount+=1,a?e.$backdrop.one(t.support.transition.end,i):i()}else if(!e._isShown&&e.$backdrop){e.$backdrop.removeClass("in"),this.backdropCount-=1;var r=this;t.support.transition&&e.$element.hasClass("fade")?e.$backdrop.one(t.support.transition.end,function(){r.removeBackdrop(e)}):r.removeBackdrop(e)}else i&&i()},removeSpinner:function(){this.$spinner&&this.$spinner.remove(),this.$spinner=null,this.isLoading=!1},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove(),this.$backdropHandle=null,this.removeSpinner()},loading:function(e){if(e=e||function(){},this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",t(window).height()<this.$element.height()),this.isLoading)if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var i=this;t.support.transition?this.$backdropHandle.one(t.support.transition.end,function(){i.removeLoading()}):i.removeLoading()}else e&&e(this.isLoading);else{this.$backdropHandle=this.createBackdrop("fade",this.options.backdropTemplate),this.$backdropHandle[0].offsetWidth;var o=this.getOpenModals();this.$backdropHandle.css("z-index",n("backdrop",o.length+1)).addClass("in");var s=t(this.options.spinner).css("z-index",n("modal",o.length+1)).appendTo(this.$element).addClass("in");this.$spinner=t(this.createContainer()).append(s).on("click.modalmanager",t.proxy(this.loading,this)).on("click.modalmanager",function(){console.log("click")}),this.isLoading=!0,t.support.transition?this.$backdropHandle.one(t.support.transition.end,e):e()}}};var n=function(){var e,i={};return function(n,o){if("undefined"==typeof e){var s=t('<div class="modal hide" />').appendTo("body"),a=t('<div class="modal-backdrop hide" />').appendTo("body");i.modal=+s.css("z-index"),i.backdrop=+a.css("z-index"),e=i.modal-i.backdrop,s.remove(),a.remove(),a=s=null}return i[n]+e*o}}();t.fn.modalmanager=function(e,n){return this.each(function(){var o=t(this),s=o.data("modalmanager");s||o.data("modalmanager",s=new i(this,e)),"string"==typeof e&&s[e].apply(s,[].concat(n))})},t.fn.modalmanager.defaults={backdropLimit:999,resize:!0,spinner:'<div class="loading-spinner fade"><div class="progress progress-striped active"><div class="progress-bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},t.fn.modalmanager.Constructor=i,t(function(){t(document).off("show.bs.modal").off("hidden.bs.modal")})}(jQuery),function(t){function e(e){var i=this;this.modal=null,this.options=t.extend({},e[1]),this.init=function(){t.modalmanager$.appendModal(this),"string"==typeof e[0]?(this.modal=t(e[0]).modal(this.options),this.initModal()):"object"==typeof e[0]&&(t.modalmanager$.loading(),this.sajax.apply(this,[{args:e[0].sajax,options:e[1]}]))},this.initModal=function(){if(this.modal.on("hide",function(){i.hide.call(i,1)}),"undefined"!=typeof this.options.events){var t=this.options.events;for(var e in t)this.modal.on(e,t[e])}},this.show=function(){return this.modal.modal("show"),this},this.hide=function(e){e=e||0,t.modalmanager$.destroyModal(this),e||this.modal.modal("hide"),this.modal=null},this.sajax=function(e){e.args.push(function(n){n=t(n),i.modal?(n.hasClass("modal")&&(n=n.html()),i.modal.html(n).modal(e.options)):(i.modal=n.modal(e.options),i.initModal()),i.removeHold()}),i.modal&&i.hold(),sajax.apply(null,e.args)},this.hold=function(){return this.modal.modal("hold"),this},this.removeHold=function(){return this.removeLoading(),this},this.loading=function(){return this.modal.modal("loading"),this},this.removeLoading=function(){return this.modal.modal("removeLoading"),this},this.init()}var i=new function(){this.name="modal$"};t[i.name]=function(){return new e(arguments)},t[i.name].Constructor=e}(jQuery),function(t){t.modalmanager$=new function(){this.stack=[],this.appendModal=function(t){this.stack.push(t)},this.getLastModal=function(t){for(var e,i=0,n=this.stack.length;i<n;i++)this.stack[i].modal.data("modal").isShown()&&(e=this.stack[i]);return e},this.destroyModal=function(t){var e=this.getIndexOfModal(t);"undefined"!=typeof e&&this.stack.splice(e,1)},this.getModalAt=function(t){return this.stack[t]},this.getIndexOfModal=function(t){for(var e=0,i=this.stack.length;e<i;e++)if(t===this.stack[e])return e},this.loading=function(){t("body").modalmanager("loading")}}}(jQuery),function(t,e){function i(t){return function(e){e.target.setCustomValidity(""),t&&t(e),e.target.checkValidity()}}function n(t){return function(i){var n,o,s,a,r=i.target,l=r.validity,d="",h={};try{e.forEach(function(t){if((s=t.match(/\-(\w)/))&&(a=t.replace(s[0],s[1].toUpperCase()))&&l[a])throw d=t,h})}catch(h){}d&&(n=r.getAttribute("data-errormessage-"+d))?r.setCustomValidity(n):(o=r.getAttribute("data-errormessage"))?r.setCustomValidity(o):r.setCustomValidity(r.validationMessage),t&&t(i)}}t.customValidity$=function(e){try{t.makeArray(t("input,select,textarea",e||document)).forEach(function(t){t.willValidate&&("select"===t.tagName.toLowerCase()?t.onchange=i(t.onchange):t.oninput=i(t.oninput),t.oninvalid=n(t.oninvalid))})}catch(o){}}}(jQuery,["value-missing","type-mismatch","pattern-mismatch","too-long","range-underflow","range-overflow","step-mismatch","custom-error"]),function(t){function e(e,i){var n=this;this.element=e,this.options={pos:"b",delay:3e3};var o,s=i.length,a={t:"top",r:"right",b:"bottom",l:"left",auto:"auto"};if(s?2==s?(o=i[0]||"",this.options=t.extend(this.options,i[1])):"string"==typeof i[0]?o=i[0]||"":"object"==typeof i[0]&&(o=e.data("errormessage-value-missing")||"",this.options=t.extend(this.options,i[0])):o=e.data("errormessage-value-missing")||"",1!==parseInt(e.data("isShowing"))){e.popover({trigger:"manual",placement:a[this.options.pos],html:!0}).data("isShowing",1);var r=e.attr("data-content",o).data("bs.popover");r.setContent(),r.show();var l=setTimeout(function(){n.hide()},this.options.delay);e.one("click",function(){n.hide()}),r.$tip.one("click",function(){n.hide()})}this.hide=function(){this.element.data("bs.popover").hide(),clearTimeout(l),e.data("isShowing",0)}}var i="msg$";t.fn[i]=function(i){var n=arguments;return this.each(function(){new e(t(this),n)})}}(jQuery),function(t){t.fn.sf$=function(e){return e=t.extend({explode:0,complete:null,callback:null},e||{}),this.each(function(){var i="sf-"+Math.random(),n=t(this),o=t("<div />").appendTo("body").hide().html('<iframe name="'+i+'"></iframe>');n.attr("target",i);var s=o.children("iframe");n.parent();s[0].onload=function(){var i=s[0].contentWindow&&s[0].contentWindow.document||s[0].contentDocument;if(i&&"about:blank"!=i.location.href){t.isFunction(e.complete)&&e.complete();var n=t("body",i);if(e.callback)e.callback(n);else if(e.explode){var a=explode$(":",n.html(),2);switch(console.log(n.html()),a[0]){case"url":location.href=a[1];break;case"wndmsg":t.modal$(a[1]);break;case"alert":alert(a[1])}}setTimeout(function(){o.remove()},1e3)}},n[0].submit(),e.preload&&preload()})}}(jQuery),function(t){var e="dynamicPageContent",i=function(i,n){var o=this,s=window.location.pathname,a={};"undefined"!=typeof i.data("location")&&(s=i.data("location")),"undefined"!=typeof i.data("args")&&(a=i.data("args")),n=t.extend({url:s,args:a,page:1,callback:null,bottomHeightRatio:1,isScroll:!0},n[0]);var r=t(window),l=t(document),d=r.height()*n.bottomHeightRatio,h=n.page,c=function(){u()};this.load=function(e){var o=t.extend(n.args,{url:n.url,page:h+1});sajax("dynamic_page_content","getData",o,function(t){t=t.length&&"{"===t.substr(0,1)?JSON.parse(t):null,null!==t&&t.items.length&&(i.append(t.items.join(t.delimiter)),++h,"function"==typeof n.callback&&n.callback(t),c()),"function"==typeof e&&e(t)})};var p=function(){r.scrollTop()+r.height()>l.height()-d&&(r.off("."+e),o.load())},u=function(){n.isScroll&&r.on("scroll."+e,t.throttle(function(){p()},200)).trigger("scroll."+e)};c()};t.fn[e]=function(n){var o=arguments;return this.each(function(){var s=t(this);t.data(this,e)?"string"==typeof n&&"undefined"!=typeof s.data(e)[n]&&s.data(e)[n].apply(s.data(e),Array.prototype.slice.call(o,1)):t.data(this,e,new i(s,o))})}}(jQuery),$.pjax.container=$.pjax.defaults.container="[data-pjax-container]",$.pjax.defaults.timeout=3e3,$(function(){$(document).on("submit","form[data-name]",function(t){t.preventDefault(),validateForm.call(this,t)}),$(document).on("click",':button[data-captcha="btn"]',function(t){t.preventDefault(),update_captcha()}),$(document).on("click",':button[data-event="dynamic-page-content"]',function(t){var e=$(t.target),i=e.data("target");e.attr("disabled","disabled"),$(i).dynamicPageContent("load",function(t){null!==t&&t.isMore||$(e.data("control-parent")).hide(),t.items.length&&e.removeAttr("disabled")})}),initShareByContext($(".product"),$("[data-gallery-share]"),{name:function(t){return t.find("[data-share-item-name]").text()},link:function(t){return location.href},description:function(t){return t.find("[data-share-item-description]").text().substr(0,150)},image:function(t){return t.find("[data-share-item-image]").text()}}),$(document).on("change",'select[data-group="mall"]',function(){$.pjax({url:this.value})}),$(document).on("keypress","#mall-search-query",function(t){if(13==t.which){var e=$(this).data("link"),i=e.indexOf("?")!==-1;this.value.length&&(e+=(i?"&":"?")+"search="+this.value),$.pjax({url:e})}}),$.customValidity$(),$(document).pjax('a:not([data-external]), a:not([hreflang]), a:not([href^="tel|mailto"])',$.pjax.container).on("pjax:send",function(){Dafi.View.PagePreloader.show()}).on("pjax:end",function(){Dafi.Controller.App.init(),Dafi.View.PagePreloader.hide(),Dafi.View.Body.resetStateOfOverflow()}),$(document).on("change",".btn-file :file",function(){var t=$(this),e=t.get(0).files?t.get(0).files.length:1,i=t.val().replace(/\\/g,"/").replace(/.*\//,"");t.trigger("fileselect",[e,i])}),$(document).on("fileselect",".btn-file :file",function(t,e,i){var n=$(this).siblings('[data-file="label"]');1===e?n.text(n.data("message-single")+" "+i):e>1?n.text(n.data("message-multiple")+" "+e):n.html(n.data("message-original")+' <span class="label-icon">'+n.data("message-original-icon")+"</span>")}),$(document).on("reset","form",function(t){$(this).find(".btn-file :file").trigger("fileselect",[0,null])}),"ontouchstart"in document||$(document).on("click",'.navbar-default [data-toggle="dropdown"]',function(t){window.innerWidth>=1200&&($.pjax({url:this.href}),t.stopPropagation())})});var listeners={},cacheMap={};window.GoogleMap=Dafi.Controller.GoogleMap={settings:{scrollwheel:!1,draggable:!1,isInited:!1},init:function(t){var e,i;this.$routeOriginEl=$('[data-route="origin"]'),e=this,this.options=$.extend(this.settings,t),this.options.coord.lat=parseFloat(t.coord.lat),this.options.coord.lng=parseFloat(t.coord.lng),this.options.zoom=parseInt(t.zoom),this.$container=$(t.container),i=$(window),this.settings.isInited===!1?this.$container.length>0&&i.on("scroll.googleMap",function(){i.scrollTop()+i.height()>e.$routeOriginEl.offset().top&&($.getScript("http://maps.google.com/maps/api/js?callback=GoogleMap.apiLoaded&sensor=false&libraries=places",function(){e.settings.isInited=!0}),i.off("load.googleMap scroll.googleMap"))}).trigger("scroll.googleMap"):this.apiLoaded()},apiLoaded:function(){var t,e,i;t=this,e=new google.maps.Map(this.$container[0],{center:t.options.coord,zoom:t.options.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP,draggable:t.options.draggable,scrollwheel:t.options.scrollwheel}),new google.maps.Marker({position:t.options.coord,map:e,title:t.options.title,icon:t.options.icon}),i=e.getCenter(),google.maps.event.trigger(e,"resize"),google.maps.event.addDomListener(window,"resize",$.throttle(function(){google.maps.event.trigger(e,"resize"),e.setCenter(i)},200)),this.$container.click(function(){e.setOptions({draggable:!0,scrollwheel:t.options.scrollwheel})}),$("body").click(function(i){t.$container.has($(i.target)).length||e.setOptions({draggable:!1})}),this.route(e)},route:function(t){var e,i,n,o,s;o=this,s=$("html, body"),e=$('[data-route="form"]'),i=new google.maps.DirectionsService,n=new google.maps.DirectionsRenderer,n.setMap(t),new google.maps.places.Autocomplete(this.$routeOriginEl[0]),e.submit(function(t){i.route({origin:o.$routeOriginEl.val(),destination:new google.maps.LatLng(o.options.coord.lat,o.options.coord.lng),travelMode:google.maps.TravelMode.DRIVING},function(t,e){e===google.maps.DirectionsStatus.OK&&(n.setDirections(t),s.animate({scrollTop:o.$container.offset().top},1e3))}),t.preventDefault()})}},Dafi.Controller.App={beforeInit:function(){Dafi.View.Body.init(),Dafi.View.pjaxContainer.init(),Dafi.View.ChangeFontSize.init(),Dafi.View.ChangeContrast.init(),Dafi.View.LazyLoad.init(),Dafi.View.Map.init(),Dafi.View.Map.initCollapse(),Dafi.View.MediaItems.init(),Dafi.View.MenuBlackout.init(),Dafi.View.MenuToggle.init(),Dafi.View.Menu.init(),Dafi.View.PagePreloader.init(),Dafi.View.Select.init(),Dafi.View.ScrollUp.init(),Dafi.View.SubscribeLine.init()},init:function(){this.beforeInit(),Dafi.Helper.User.isTouchScreen()?Dafi.View.Body.$el.addClass("touchscreen-yes"):Dafi.View.Body.$el.addClass("touchscreen-no")}},Dafi.Controller.App.init();
//# sourceMappingURL=main.js.map
